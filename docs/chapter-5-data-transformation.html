<!DOCTYPE html>
<html >

<head>

  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>R for Data Science Solution Set</title>
  <meta name="description" content="R for Data Science Solution Set">
  <meta name="generator" content="bookdown 0.7 and GitBook 2.6.7">

  <meta property="og:title" content="R for Data Science Solution Set" />
  <meta property="og:type" content="book" />
  
  
  
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="R for Data Science Solution Set" />
  
  
  




  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  
  
<link rel="prev" href="chapter-3-data-visualisation.html">
<link rel="next" href="chapter-7-exploratory-data-analysis.html">
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />







<script src="libs/htmlwidgets-1.2/htmlwidgets.js"></script>
<link href="libs/str_view-0.1.0/str_view.css" rel="stylesheet" />
<script src="libs/str_view-binding-1.3.0/str_view.js"></script>


<style type="text/css">
div.sourceCode { overflow-x: auto; }
table.sourceCode, tr.sourceCode, td.lineNumbers, td.sourceCode {
  margin: 0; padding: 0; vertical-align: baseline; border: none; }
table.sourceCode { width: 100%; line-height: 100%; }
td.lineNumbers { text-align: right; padding-right: 4px; padding-left: 4px; color: #aaaaaa; border-right: 1px solid #aaaaaa; }
td.sourceCode { padding-left: 5px; }
code > span.kw { color: #007020; font-weight: bold; } /* Keyword */
code > span.dt { color: #902000; } /* DataType */
code > span.dv { color: #40a070; } /* DecVal */
code > span.bn { color: #40a070; } /* BaseN */
code > span.fl { color: #40a070; } /* Float */
code > span.ch { color: #4070a0; } /* Char */
code > span.st { color: #4070a0; } /* String */
code > span.co { color: #60a0b0; font-style: italic; } /* Comment */
code > span.ot { color: #007020; } /* Other */
code > span.al { color: #ff0000; font-weight: bold; } /* Alert */
code > span.fu { color: #06287e; } /* Function */
code > span.er { color: #ff0000; font-weight: bold; } /* Error */
code > span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
code > span.cn { color: #880000; } /* Constant */
code > span.sc { color: #4070a0; } /* SpecialChar */
code > span.vs { color: #4070a0; } /* VerbatimString */
code > span.ss { color: #bb6688; } /* SpecialString */
code > span.im { } /* Import */
code > span.va { color: #19177c; } /* Variable */
code > span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code > span.op { color: #666666; } /* Operator */
code > span.bu { } /* BuiltIn */
code > span.ex { } /* Extension */
code > span.pp { color: #bc7a00; } /* Preprocessor */
code > span.at { color: #7d9029; } /* Attribute */
code > span.do { color: #ba2121; font-style: italic; } /* Documentation */
code > span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code > span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code > span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
</style>

</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Preface</a><ul>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#acknowledgements"><i class="fa fa-check"></i>Acknowledgements</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="chapter-3-data-visualisation.html"><a href="chapter-3-data-visualisation.html"><i class="fa fa-check"></i>Chapter 3 - Data Visualisation</a><ul>
<li class="chapter" data-level="" data-path="chapter-3-data-visualisation.html"><a href="chapter-3-data-visualisation.html#first-steps"><i class="fa fa-check"></i>3.2 - First Steps</a><ul>
<li class="chapter" data-level="" data-path="chapter-3-data-visualisation.html"><a href="chapter-3-data-visualisation.html#problem-1"><i class="fa fa-check"></i>Problem 1</a></li>
<li class="chapter" data-level="" data-path="chapter-3-data-visualisation.html"><a href="chapter-3-data-visualisation.html#problem-2"><i class="fa fa-check"></i>Problem 2</a></li>
<li class="chapter" data-level="" data-path="chapter-3-data-visualisation.html"><a href="chapter-3-data-visualisation.html#problem-3"><i class="fa fa-check"></i>Problem 3</a></li>
<li class="chapter" data-level="" data-path="chapter-3-data-visualisation.html"><a href="chapter-3-data-visualisation.html#problem-4"><i class="fa fa-check"></i>Problem 4</a></li>
<li class="chapter" data-level="" data-path="chapter-3-data-visualisation.html"><a href="chapter-3-data-visualisation.html#problem-5"><i class="fa fa-check"></i>Problem 5</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="chapter-3-data-visualisation.html"><a href="chapter-3-data-visualisation.html#aesthetic-mappings"><i class="fa fa-check"></i>3.3 - Aesthetic Mappings</a><ul>
<li class="chapter" data-level="" data-path="chapter-3-data-visualisation.html"><a href="chapter-3-data-visualisation.html#problem-1-1"><i class="fa fa-check"></i>Problem 1</a></li>
<li class="chapter" data-level="" data-path="chapter-3-data-visualisation.html"><a href="chapter-3-data-visualisation.html#problem-2-1"><i class="fa fa-check"></i>Problem 2</a></li>
<li class="chapter" data-level="" data-path="chapter-3-data-visualisation.html"><a href="chapter-3-data-visualisation.html#problem-3-1"><i class="fa fa-check"></i>Problem 3</a></li>
<li class="chapter" data-level="" data-path="chapter-3-data-visualisation.html"><a href="chapter-3-data-visualisation.html#problem-4-1"><i class="fa fa-check"></i>Problem 4</a></li>
<li class="chapter" data-level="" data-path="chapter-3-data-visualisation.html"><a href="chapter-3-data-visualisation.html#problem-5-1"><i class="fa fa-check"></i>Problem 5</a></li>
<li class="chapter" data-level="" data-path="chapter-3-data-visualisation.html"><a href="chapter-3-data-visualisation.html#problem-6"><i class="fa fa-check"></i>Problem 6</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="chapter-3-data-visualisation.html"><a href="chapter-3-data-visualisation.html#facets"><i class="fa fa-check"></i>3.5 - Facets</a><ul>
<li class="chapter" data-level="" data-path="chapter-3-data-visualisation.html"><a href="chapter-3-data-visualisation.html#problem-1-2"><i class="fa fa-check"></i>Problem 1</a></li>
<li class="chapter" data-level="" data-path="chapter-3-data-visualisation.html"><a href="chapter-3-data-visualisation.html#problem-2-2"><i class="fa fa-check"></i>Problem 2</a></li>
<li class="chapter" data-level="" data-path="chapter-3-data-visualisation.html"><a href="chapter-3-data-visualisation.html#problem-3-2"><i class="fa fa-check"></i>Problem 3</a></li>
<li class="chapter" data-level="" data-path="chapter-3-data-visualisation.html"><a href="chapter-3-data-visualisation.html#problem-4-2"><i class="fa fa-check"></i>Problem 4</a></li>
<li class="chapter" data-level="" data-path="chapter-3-data-visualisation.html"><a href="chapter-3-data-visualisation.html#problem-5-2"><i class="fa fa-check"></i>Problem 5</a></li>
<li class="chapter" data-level="" data-path="chapter-3-data-visualisation.html"><a href="chapter-3-data-visualisation.html#problem-6-1"><i class="fa fa-check"></i>Problem 6</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="chapter-3-data-visualisation.html"><a href="chapter-3-data-visualisation.html#geometric-objects"><i class="fa fa-check"></i>3.6 - Geometric Objects</a><ul>
<li class="chapter" data-level="" data-path="chapter-3-data-visualisation.html"><a href="chapter-3-data-visualisation.html#problem-1-3"><i class="fa fa-check"></i>Problem 1</a></li>
<li class="chapter" data-level="" data-path="chapter-3-data-visualisation.html"><a href="chapter-3-data-visualisation.html#problem-2-3"><i class="fa fa-check"></i>Problem 2</a></li>
<li class="chapter" data-level="" data-path="chapter-3-data-visualisation.html"><a href="chapter-3-data-visualisation.html#problem-3-3"><i class="fa fa-check"></i>Problem 3</a></li>
<li class="chapter" data-level="" data-path="chapter-3-data-visualisation.html"><a href="chapter-3-data-visualisation.html#problem-4-3"><i class="fa fa-check"></i>Problem 4</a></li>
<li class="chapter" data-level="" data-path="chapter-3-data-visualisation.html"><a href="chapter-3-data-visualisation.html#problem-5-3"><i class="fa fa-check"></i>Problem 5</a></li>
<li class="chapter" data-level="" data-path="chapter-3-data-visualisation.html"><a href="chapter-3-data-visualisation.html#problem-6-2"><i class="fa fa-check"></i>Problem 6</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="chapter-3-data-visualisation.html"><a href="chapter-3-data-visualisation.html#statistical-transformations"><i class="fa fa-check"></i>3.7 - Statistical Transformations</a><ul>
<li class="chapter" data-level="" data-path="chapter-3-data-visualisation.html"><a href="chapter-3-data-visualisation.html#problem-1-4"><i class="fa fa-check"></i>Problem 1</a></li>
<li class="chapter" data-level="" data-path="chapter-3-data-visualisation.html"><a href="chapter-3-data-visualisation.html#problem-2-4"><i class="fa fa-check"></i>Problem 2</a></li>
<li class="chapter" data-level="" data-path="chapter-3-data-visualisation.html"><a href="chapter-3-data-visualisation.html#problem-3-4"><i class="fa fa-check"></i>Problem 3</a></li>
<li class="chapter" data-level="" data-path="chapter-3-data-visualisation.html"><a href="chapter-3-data-visualisation.html#problem-4-4"><i class="fa fa-check"></i>Problem 4</a></li>
<li class="chapter" data-level="" data-path="chapter-3-data-visualisation.html"><a href="chapter-3-data-visualisation.html#problem-5-4"><i class="fa fa-check"></i>Problem 5</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="chapter-3-data-visualisation.html"><a href="chapter-3-data-visualisation.html#position-adjustments"><i class="fa fa-check"></i>3.8 - Position Adjustments</a><ul>
<li class="chapter" data-level="" data-path="chapter-3-data-visualisation.html"><a href="chapter-3-data-visualisation.html#problem-1-5"><i class="fa fa-check"></i>Problem 1</a></li>
<li class="chapter" data-level="" data-path="chapter-3-data-visualisation.html"><a href="chapter-3-data-visualisation.html#problem-2-5"><i class="fa fa-check"></i>Problem 2</a></li>
<li class="chapter" data-level="" data-path="chapter-3-data-visualisation.html"><a href="chapter-3-data-visualisation.html#problem-3-5"><i class="fa fa-check"></i>Problem 3</a></li>
<li class="chapter" data-level="" data-path="chapter-3-data-visualisation.html"><a href="chapter-3-data-visualisation.html#problem-4-5"><i class="fa fa-check"></i>Problem 4</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="chapter-3-data-visualisation.html"><a href="chapter-3-data-visualisation.html#coordinate-systems"><i class="fa fa-check"></i>3.9 - Coordinate Systems</a><ul>
<li class="chapter" data-level="" data-path="chapter-3-data-visualisation.html"><a href="chapter-3-data-visualisation.html#problem-1-6"><i class="fa fa-check"></i>Problem 1</a></li>
<li class="chapter" data-level="" data-path="chapter-3-data-visualisation.html"><a href="chapter-3-data-visualisation.html#problem-2-6"><i class="fa fa-check"></i>Problem 2</a></li>
<li class="chapter" data-level="" data-path="chapter-3-data-visualisation.html"><a href="chapter-3-data-visualisation.html#problem-3-6"><i class="fa fa-check"></i>Problem 3</a></li>
<li class="chapter" data-level="" data-path="chapter-3-data-visualisation.html"><a href="chapter-3-data-visualisation.html#problem-4-6"><i class="fa fa-check"></i>Problem 4</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="" data-path="chapter-5-data-transformation.html"><a href="chapter-5-data-transformation.html"><i class="fa fa-check"></i>Chapter 5 - Data Transformation</a><ul>
<li class="chapter" data-level="" data-path="chapter-5-data-transformation.html"><a href="chapter-5-data-transformation.html#filter-rows-with-filter"><i class="fa fa-check"></i>5.2 - Filter Rows with filter()</a><ul>
<li class="chapter" data-level="" data-path="chapter-5-data-transformation.html"><a href="chapter-5-data-transformation.html#problem-1-7"><i class="fa fa-check"></i>Problem 1</a></li>
<li class="chapter" data-level="" data-path="chapter-5-data-transformation.html"><a href="chapter-5-data-transformation.html#problem-2-7"><i class="fa fa-check"></i>Problem 2</a></li>
<li class="chapter" data-level="" data-path="chapter-5-data-transformation.html"><a href="chapter-5-data-transformation.html#problem-3-7"><i class="fa fa-check"></i>Problem 3</a></li>
<li class="chapter" data-level="" data-path="chapter-5-data-transformation.html"><a href="chapter-5-data-transformation.html#problem-4-7"><i class="fa fa-check"></i>Problem 4</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="chapter-5-data-transformation.html"><a href="chapter-5-data-transformation.html#arrange-rows-with-arrange"><i class="fa fa-check"></i>5.3 - Arrange Rows with arrange()</a><ul>
<li class="chapter" data-level="" data-path="chapter-5-data-transformation.html"><a href="chapter-5-data-transformation.html#problem-1-8"><i class="fa fa-check"></i>Problem 1</a></li>
<li class="chapter" data-level="" data-path="chapter-5-data-transformation.html"><a href="chapter-5-data-transformation.html#problem-2-8"><i class="fa fa-check"></i>Problem 2</a></li>
<li class="chapter" data-level="" data-path="chapter-5-data-transformation.html"><a href="chapter-5-data-transformation.html#problem-3-8"><i class="fa fa-check"></i>Problem 3</a></li>
<li class="chapter" data-level="" data-path="chapter-5-data-transformation.html"><a href="chapter-5-data-transformation.html#problem-4-8"><i class="fa fa-check"></i>Problem 4</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="chapter-5-data-transformation.html"><a href="chapter-5-data-transformation.html#select-columns-with-select"><i class="fa fa-check"></i>5.4 - Select Columns with select()</a><ul>
<li class="chapter" data-level="" data-path="chapter-5-data-transformation.html"><a href="chapter-5-data-transformation.html#problem-1-9"><i class="fa fa-check"></i>Problem 1</a></li>
<li class="chapter" data-level="" data-path="chapter-5-data-transformation.html"><a href="chapter-5-data-transformation.html#problem-2-9"><i class="fa fa-check"></i>Problem 2</a></li>
<li class="chapter" data-level="" data-path="chapter-5-data-transformation.html"><a href="chapter-5-data-transformation.html#problem-3-9"><i class="fa fa-check"></i>Problem 3</a></li>
<li class="chapter" data-level="" data-path="chapter-5-data-transformation.html"><a href="chapter-5-data-transformation.html#problem-4-9"><i class="fa fa-check"></i>Problem 4</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="chapter-5-data-transformation.html"><a href="chapter-5-data-transformation.html#add-new-variables-with-mutate"><i class="fa fa-check"></i>5.5 - Add New Variables with mutate()</a><ul>
<li class="chapter" data-level="" data-path="chapter-5-data-transformation.html"><a href="chapter-5-data-transformation.html#problem-1-10"><i class="fa fa-check"></i>Problem 1</a></li>
<li class="chapter" data-level="" data-path="chapter-5-data-transformation.html"><a href="chapter-5-data-transformation.html#problem-2-10"><i class="fa fa-check"></i>Problem 2</a></li>
<li class="chapter" data-level="" data-path="chapter-5-data-transformation.html"><a href="chapter-5-data-transformation.html#problem-3-10"><i class="fa fa-check"></i>Problem 3</a></li>
<li class="chapter" data-level="" data-path="chapter-5-data-transformation.html"><a href="chapter-5-data-transformation.html#problem-4-10"><i class="fa fa-check"></i>Problem 4</a></li>
<li class="chapter" data-level="" data-path="chapter-5-data-transformation.html"><a href="chapter-5-data-transformation.html#problem-5-5"><i class="fa fa-check"></i>Problem 5</a></li>
<li class="chapter" data-level="" data-path="chapter-5-data-transformation.html"><a href="chapter-5-data-transformation.html#problem-6-3"><i class="fa fa-check"></i>Problem 6</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="chapter-5-data-transformation.html"><a href="chapter-5-data-transformation.html#grouped-summaries-with-summarise"><i class="fa fa-check"></i>5.6 - Grouped summaries with summarise()</a><ul>
<li class="chapter" data-level="" data-path="chapter-5-data-transformation.html"><a href="chapter-5-data-transformation.html#problem-1-11"><i class="fa fa-check"></i>Problem 1</a></li>
<li class="chapter" data-level="" data-path="chapter-5-data-transformation.html"><a href="chapter-5-data-transformation.html#problem-2-11"><i class="fa fa-check"></i>Problem 2</a></li>
<li class="chapter" data-level="" data-path="chapter-5-data-transformation.html"><a href="chapter-5-data-transformation.html#problem-3-11"><i class="fa fa-check"></i>Problem 3</a></li>
<li class="chapter" data-level="" data-path="chapter-5-data-transformation.html"><a href="chapter-5-data-transformation.html#problem-4-11"><i class="fa fa-check"></i>Problem 4</a></li>
<li class="chapter" data-level="" data-path="chapter-5-data-transformation.html"><a href="chapter-5-data-transformation.html#problem-5-6"><i class="fa fa-check"></i>Problem 5</a></li>
<li class="chapter" data-level="" data-path="chapter-5-data-transformation.html"><a href="chapter-5-data-transformation.html#problem-6-4"><i class="fa fa-check"></i>Problem 6</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="chapter-5-data-transformation.html"><a href="chapter-5-data-transformation.html#grouped-mutates-and-filters"><i class="fa fa-check"></i>5.7 - Grouped Mutates (and Filters)</a><ul>
<li class="chapter" data-level="" data-path="chapter-5-data-transformation.html"><a href="chapter-5-data-transformation.html#problem-1-12"><i class="fa fa-check"></i>Problem 1</a></li>
<li class="chapter" data-level="" data-path="chapter-5-data-transformation.html"><a href="chapter-5-data-transformation.html#problem-2-12"><i class="fa fa-check"></i>Problem 2</a></li>
<li class="chapter" data-level="" data-path="chapter-5-data-transformation.html"><a href="chapter-5-data-transformation.html#problem-3-12"><i class="fa fa-check"></i>Problem 3</a></li>
<li class="chapter" data-level="" data-path="chapter-5-data-transformation.html"><a href="chapter-5-data-transformation.html#problem-4-12"><i class="fa fa-check"></i>Problem 4</a></li>
<li class="chapter" data-level="" data-path="chapter-5-data-transformation.html"><a href="chapter-5-data-transformation.html#problem-5-7"><i class="fa fa-check"></i>Problem 5</a></li>
<li class="chapter" data-level="" data-path="chapter-5-data-transformation.html"><a href="chapter-5-data-transformation.html#problem-6-5"><i class="fa fa-check"></i>Problem 6</a></li>
<li class="chapter" data-level="" data-path="chapter-5-data-transformation.html"><a href="chapter-5-data-transformation.html#problem-7"><i class="fa fa-check"></i>Problem 7</a></li>
<li class="chapter" data-level="" data-path="chapter-5-data-transformation.html"><a href="chapter-5-data-transformation.html#problem-8"><i class="fa fa-check"></i>Problem 8</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="" data-path="chapter-7-exploratory-data-analysis.html"><a href="chapter-7-exploratory-data-analysis.html"><i class="fa fa-check"></i>Chapter 7 - Exploratory Data Analysis</a><ul>
<li class="chapter" data-level="" data-path="chapter-7-exploratory-data-analysis.html"><a href="chapter-7-exploratory-data-analysis.html#variation"><i class="fa fa-check"></i>7.3 - Variation</a><ul>
<li class="chapter" data-level="" data-path="chapter-7-exploratory-data-analysis.html"><a href="chapter-7-exploratory-data-analysis.html#problem-1-13"><i class="fa fa-check"></i>Problem 1</a></li>
<li class="chapter" data-level="" data-path="chapter-7-exploratory-data-analysis.html"><a href="chapter-7-exploratory-data-analysis.html#problem-2-13"><i class="fa fa-check"></i>Problem 2</a></li>
<li class="chapter" data-level="" data-path="chapter-7-exploratory-data-analysis.html"><a href="chapter-7-exploratory-data-analysis.html#problem-3-13"><i class="fa fa-check"></i>Problem 3</a></li>
<li class="chapter" data-level="" data-path="chapter-7-exploratory-data-analysis.html"><a href="chapter-7-exploratory-data-analysis.html#problem-4-13"><i class="fa fa-check"></i>Problem 4</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="chapter-7-exploratory-data-analysis.html"><a href="chapter-7-exploratory-data-analysis.html#missing-values"><i class="fa fa-check"></i>7.4 - Missing Values</a><ul>
<li class="chapter" data-level="" data-path="chapter-7-exploratory-data-analysis.html"><a href="chapter-7-exploratory-data-analysis.html#problem-1-14"><i class="fa fa-check"></i>Problem 1</a></li>
<li class="chapter" data-level="" data-path="chapter-7-exploratory-data-analysis.html"><a href="chapter-7-exploratory-data-analysis.html#problem-2-14"><i class="fa fa-check"></i>Problem 2</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="" data-path="chapter-10-tibbles.html"><a href="chapter-10-tibbles.html"><i class="fa fa-check"></i>Chapter 10 - Tibbles</a><ul>
<li class="chapter" data-level="" data-path="chapter-10-tibbles.html"><a href="chapter-10-tibbles.html#exercises"><i class="fa fa-check"></i>10.5 - Exercises</a><ul>
<li class="chapter" data-level="" data-path="chapter-10-tibbles.html"><a href="chapter-10-tibbles.html#problem-1-15"><i class="fa fa-check"></i>Problem 1</a></li>
<li class="chapter" data-level="" data-path="chapter-10-tibbles.html"><a href="chapter-10-tibbles.html#problem-2-15"><i class="fa fa-check"></i>Problem 2</a></li>
<li class="chapter" data-level="" data-path="chapter-10-tibbles.html"><a href="chapter-10-tibbles.html#problem-3-14"><i class="fa fa-check"></i>Problem 3</a></li>
<li class="chapter" data-level="" data-path="chapter-10-tibbles.html"><a href="chapter-10-tibbles.html#problem-4-14"><i class="fa fa-check"></i>Problem 4</a></li>
<li class="chapter" data-level="" data-path="chapter-10-tibbles.html"><a href="chapter-10-tibbles.html#problem-5-8"><i class="fa fa-check"></i>Problem 5</a></li>
<li class="chapter" data-level="" data-path="chapter-10-tibbles.html"><a href="chapter-10-tibbles.html#problem-6-6"><i class="fa fa-check"></i>Problem 6</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="" data-path="chapter-11-data-import.html"><a href="chapter-11-data-import.html"><i class="fa fa-check"></i>Chapter 11 - Data Import</a><ul>
<li class="chapter" data-level="" data-path="chapter-11-data-import.html"><a href="chapter-11-data-import.html#getting-started"><i class="fa fa-check"></i>11.2 - Getting Started</a><ul>
<li class="chapter" data-level="" data-path="chapter-11-data-import.html"><a href="chapter-11-data-import.html#problem-1-16"><i class="fa fa-check"></i>Problem 1</a></li>
<li class="chapter" data-level="" data-path="chapter-11-data-import.html"><a href="chapter-11-data-import.html#problem-2-16"><i class="fa fa-check"></i>Problem 2</a></li>
<li class="chapter" data-level="" data-path="chapter-11-data-import.html"><a href="chapter-11-data-import.html#problem-3-15"><i class="fa fa-check"></i>Problem 3</a></li>
<li class="chapter" data-level="" data-path="chapter-11-data-import.html"><a href="chapter-11-data-import.html#problem-4-15"><i class="fa fa-check"></i>Problem 4</a></li>
<li class="chapter" data-level="" data-path="chapter-11-data-import.html"><a href="chapter-11-data-import.html#problem-5-9"><i class="fa fa-check"></i>Problem 5</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="chapter-11-data-import.html"><a href="chapter-11-data-import.html#parsing-a-vector"><i class="fa fa-check"></i>11.3 - Parsing a Vector</a><ul>
<li class="chapter" data-level="" data-path="chapter-11-data-import.html"><a href="chapter-11-data-import.html#problem-1-17"><i class="fa fa-check"></i>Problem 1</a></li>
<li class="chapter" data-level="" data-path="chapter-11-data-import.html"><a href="chapter-11-data-import.html#problem-2-17"><i class="fa fa-check"></i>Problem 2</a></li>
<li class="chapter" data-level="" data-path="chapter-11-data-import.html"><a href="chapter-11-data-import.html#problem-3-16"><i class="fa fa-check"></i>Problem 3</a></li>
<li class="chapter" data-level="" data-path="chapter-11-data-import.html"><a href="chapter-11-data-import.html#problem-4-16"><i class="fa fa-check"></i>Problem 4</a></li>
<li class="chapter" data-level="" data-path="chapter-11-data-import.html"><a href="chapter-11-data-import.html#problem-5-10"><i class="fa fa-check"></i>Problem 5</a></li>
<li class="chapter" data-level="" data-path="chapter-11-data-import.html"><a href="chapter-11-data-import.html#problem-6-7"><i class="fa fa-check"></i>Problem 6</a></li>
<li class="chapter" data-level="" data-path="chapter-11-data-import.html"><a href="chapter-11-data-import.html#problem-7-1"><i class="fa fa-check"></i>Problem 7</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="" data-path="chapter-12-tidy-data.html"><a href="chapter-12-tidy-data.html"><i class="fa fa-check"></i>Chapter 12 - Tidy Data</a><ul>
<li class="chapter" data-level="" data-path="chapter-12-tidy-data.html"><a href="chapter-12-tidy-data.html#tidy-data"><i class="fa fa-check"></i>12.2 - Tidy Data</a><ul>
<li class="chapter" data-level="" data-path="chapter-12-tidy-data.html"><a href="chapter-12-tidy-data.html#problem-1-18"><i class="fa fa-check"></i>Problem 1</a></li>
<li class="chapter" data-level="" data-path="chapter-12-tidy-data.html"><a href="chapter-12-tidy-data.html#problem-2-18"><i class="fa fa-check"></i>Problem 2</a></li>
<li class="chapter" data-level="" data-path="chapter-12-tidy-data.html"><a href="chapter-12-tidy-data.html#problem-3-17"><i class="fa fa-check"></i>Problem 3</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="chapter-12-tidy-data.html"><a href="chapter-12-tidy-data.html#spreading-and-gathering"><i class="fa fa-check"></i>12.3 - Spreading and Gathering</a><ul>
<li class="chapter" data-level="" data-path="chapter-12-tidy-data.html"><a href="chapter-12-tidy-data.html#problem-1-19"><i class="fa fa-check"></i>Problem 1</a></li>
<li class="chapter" data-level="" data-path="chapter-12-tidy-data.html"><a href="chapter-12-tidy-data.html#problem-2-19"><i class="fa fa-check"></i>Problem 2</a></li>
<li class="chapter" data-level="" data-path="chapter-12-tidy-data.html"><a href="chapter-12-tidy-data.html#problem-3-18"><i class="fa fa-check"></i>Problem 3</a></li>
<li class="chapter" data-level="" data-path="chapter-12-tidy-data.html"><a href="chapter-12-tidy-data.html#problem-4-17"><i class="fa fa-check"></i>Problem 4</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="chapter-12-tidy-data.html"><a href="chapter-12-tidy-data.html#spreading-and-uniting"><i class="fa fa-check"></i>12.4 - Spreading and Uniting</a><ul>
<li class="chapter" data-level="" data-path="chapter-12-tidy-data.html"><a href="chapter-12-tidy-data.html#problem-1-20"><i class="fa fa-check"></i>Problem 1</a></li>
<li class="chapter" data-level="" data-path="chapter-12-tidy-data.html"><a href="chapter-12-tidy-data.html#problem-2-20"><i class="fa fa-check"></i>Problem 2</a></li>
<li class="chapter" data-level="" data-path="chapter-12-tidy-data.html"><a href="chapter-12-tidy-data.html#problem-3-19"><i class="fa fa-check"></i>Problem 3</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="" data-path="chapter-13-relational-data.html"><a href="chapter-13-relational-data.html"><i class="fa fa-check"></i>Chapter 13 - Relational data</a><ul>
<li class="chapter" data-level="" data-path="chapter-13-relational-data.html"><a href="chapter-13-relational-data.html#nycflights13"><i class="fa fa-check"></i>13.2 - nycflights13</a><ul>
<li class="chapter" data-level="" data-path="chapter-13-relational-data.html"><a href="chapter-13-relational-data.html#problem-1-21"><i class="fa fa-check"></i>Problem 1</a></li>
<li class="chapter" data-level="" data-path="chapter-13-relational-data.html"><a href="chapter-13-relational-data.html#problem-2-21"><i class="fa fa-check"></i>Problem 2</a></li>
<li class="chapter" data-level="" data-path="chapter-13-relational-data.html"><a href="chapter-13-relational-data.html#problem-3-20"><i class="fa fa-check"></i>Problem 3</a></li>
<li class="chapter" data-level="" data-path="chapter-13-relational-data.html"><a href="chapter-13-relational-data.html#problem-4-18"><i class="fa fa-check"></i>Problem 4</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="chapter-13-relational-data.html"><a href="chapter-13-relational-data.html#keys"><i class="fa fa-check"></i>13.3 - Keys</a><ul>
<li class="chapter" data-level="" data-path="chapter-13-relational-data.html"><a href="chapter-13-relational-data.html#problem-1-22"><i class="fa fa-check"></i>Problem 1</a></li>
<li class="chapter" data-level="" data-path="chapter-13-relational-data.html"><a href="chapter-13-relational-data.html#problem-2-22"><i class="fa fa-check"></i>Problem 2</a></li>
<li class="chapter" data-level="" data-path="chapter-13-relational-data.html"><a href="chapter-13-relational-data.html#problem-3-21"><i class="fa fa-check"></i>Problem 3</a></li>
<li class="chapter" data-level="" data-path="chapter-13-relational-data.html"><a href="chapter-13-relational-data.html#problem-4-19"><i class="fa fa-check"></i>Problem 4</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="chapter-13-relational-data.html"><a href="chapter-13-relational-data.html#mutating-joins"><i class="fa fa-check"></i>13.4 - Mutating joins</a><ul>
<li class="chapter" data-level="" data-path="chapter-13-relational-data.html"><a href="chapter-13-relational-data.html#problem-1-23"><i class="fa fa-check"></i>Problem 1</a></li>
<li class="chapter" data-level="" data-path="chapter-13-relational-data.html"><a href="chapter-13-relational-data.html#problem-2-23"><i class="fa fa-check"></i>Problem 2</a></li>
<li class="chapter" data-level="" data-path="chapter-13-relational-data.html"><a href="chapter-13-relational-data.html#problem-3-22"><i class="fa fa-check"></i>Problem 3</a></li>
<li class="chapter" data-level="" data-path="chapter-13-relational-data.html"><a href="chapter-13-relational-data.html#problem-4-20"><i class="fa fa-check"></i>Problem 4</a></li>
<li class="chapter" data-level="" data-path="chapter-13-relational-data.html"><a href="chapter-13-relational-data.html#problem-5-11"><i class="fa fa-check"></i>Problem 5</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="chapter-13-relational-data.html"><a href="chapter-13-relational-data.html#filtering-joins"><i class="fa fa-check"></i>13.5 - Filtering joins</a><ul>
<li class="chapter" data-level="" data-path="chapter-13-relational-data.html"><a href="chapter-13-relational-data.html#problem-1-24"><i class="fa fa-check"></i>Problem 1</a></li>
<li class="chapter" data-level="" data-path="chapter-13-relational-data.html"><a href="chapter-13-relational-data.html#problem-2-24"><i class="fa fa-check"></i>Problem 2</a></li>
<li class="chapter" data-level="" data-path="chapter-13-relational-data.html"><a href="chapter-13-relational-data.html#problem-3-23"><i class="fa fa-check"></i>Problem 3</a></li>
<li class="chapter" data-level="" data-path="chapter-13-relational-data.html"><a href="chapter-13-relational-data.html#problem-4-21"><i class="fa fa-check"></i>Problem 4</a></li>
<li class="chapter" data-level="" data-path="chapter-13-relational-data.html"><a href="chapter-13-relational-data.html#problem-5-12"><i class="fa fa-check"></i>Problem 5</a></li>
<li class="chapter" data-level="" data-path="chapter-13-relational-data.html"><a href="chapter-13-relational-data.html#problem-6-8"><i class="fa fa-check"></i>Problem 6</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="" data-path="chapter-14-strings.html"><a href="chapter-14-strings.html"><i class="fa fa-check"></i>Chapter 14 - Strings</a><ul>
<li class="chapter" data-level="" data-path="chapter-14-strings.html"><a href="chapter-14-strings.html#string-basics"><i class="fa fa-check"></i>14.2 - String basics</a><ul>
<li class="chapter" data-level="" data-path="chapter-14-strings.html"><a href="chapter-14-strings.html#problem-1-25"><i class="fa fa-check"></i>Problem 1</a></li>
<li class="chapter" data-level="" data-path="chapter-14-strings.html"><a href="chapter-14-strings.html#problem-2-25"><i class="fa fa-check"></i>Problem 2</a></li>
<li class="chapter" data-level="" data-path="chapter-14-strings.html"><a href="chapter-14-strings.html#problem-3-24"><i class="fa fa-check"></i>Problem 3</a></li>
<li class="chapter" data-level="" data-path="chapter-14-strings.html"><a href="chapter-14-strings.html#problem-4-22"><i class="fa fa-check"></i>Problem 4</a></li>
<li class="chapter" data-level="" data-path="chapter-14-strings.html"><a href="chapter-14-strings.html#problem-5-13"><i class="fa fa-check"></i>Problem 5</a></li>
<li class="chapter" data-level="" data-path="chapter-14-strings.html"><a href="chapter-14-strings.html#problem-6-9"><i class="fa fa-check"></i>Problem 6</a></li>
<li class="chapter" data-level="" data-path="chapter-14-strings.html"><a href="chapter-14-strings.html#problem-1-26"><i class="fa fa-check"></i>Problem 1</a></li>
<li class="chapter" data-level="" data-path="chapter-14-strings.html"><a href="chapter-14-strings.html#problem-2-26"><i class="fa fa-check"></i>Problem 2</a></li>
<li class="chapter" data-level="" data-path="chapter-14-strings.html"><a href="chapter-14-strings.html#problem-3-25"><i class="fa fa-check"></i>Problem 3</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="chapter-14-strings.html"><a href="chapter-14-strings.html#anchors"><i class="fa fa-check"></i>14.3.2 - Anchors</a><ul>
<li class="chapter" data-level="" data-path="chapter-14-strings.html"><a href="chapter-14-strings.html#problem-1-27"><i class="fa fa-check"></i>Problem 1</a></li>
<li class="chapter" data-level="" data-path="chapter-14-strings.html"><a href="chapter-14-strings.html#problem-2-27"><i class="fa fa-check"></i>Problem 2</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="chapter-14-strings.html"><a href="chapter-14-strings.html#character-classes-and-alternatives"><i class="fa fa-check"></i>14.3.2 - Character classes and alternatives</a><ul>
<li class="chapter" data-level="" data-path="chapter-14-strings.html"><a href="chapter-14-strings.html#problem-1-28"><i class="fa fa-check"></i>Problem 1</a></li>
<li class="chapter" data-level="" data-path="chapter-14-strings.html"><a href="chapter-14-strings.html#problem-2-28"><i class="fa fa-check"></i>Problem 2</a></li>
<li class="chapter" data-level="" data-path="chapter-14-strings.html"><a href="chapter-14-strings.html#problem-3-26"><i class="fa fa-check"></i>Problem 3</a></li>
<li class="chapter" data-level="" data-path="chapter-14-strings.html"><a href="chapter-14-strings.html#problem-4-23"><i class="fa fa-check"></i>Problem 4</a></li>
<li class="chapter" data-level="" data-path="chapter-14-strings.html"><a href="chapter-14-strings.html#problem-5-14"><i class="fa fa-check"></i>Problem 5</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="chapter-14-strings.html"><a href="chapter-14-strings.html#repetition"><i class="fa fa-check"></i>14.3.4 - Repetition</a><ul>
<li class="chapter" data-level="" data-path="chapter-14-strings.html"><a href="chapter-14-strings.html#problem-1-29"><i class="fa fa-check"></i>Problem 1</a></li>
<li class="chapter" data-level="" data-path="chapter-14-strings.html"><a href="chapter-14-strings.html#problem-2-29"><i class="fa fa-check"></i>Problem 2</a></li>
<li class="chapter" data-level="" data-path="chapter-14-strings.html"><a href="chapter-14-strings.html#problem-3-27"><i class="fa fa-check"></i>Problem 3</a></li>
<li class="chapter" data-level="" data-path="chapter-14-strings.html"><a href="chapter-14-strings.html#problem-4-24"><i class="fa fa-check"></i>Problem 4</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="chapter-14-strings.html"><a href="chapter-14-strings.html#grouping-and-backreferences"><i class="fa fa-check"></i>14.3.5 - Grouping and backreferences</a><ul>
<li class="chapter" data-level="" data-path="chapter-14-strings.html"><a href="chapter-14-strings.html#problem-1-30"><i class="fa fa-check"></i>Problem 1</a></li>
<li class="chapter" data-level="" data-path="chapter-14-strings.html"><a href="chapter-14-strings.html#problem-2-30"><i class="fa fa-check"></i>Problem 2</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="chapter-14-strings.html"><a href="chapter-14-strings.html#tools"><i class="fa fa-check"></i>14.4 - Tools</a><ul>
<li class="chapter" data-level="" data-path="chapter-14-strings.html"><a href="chapter-14-strings.html#problem-1-31"><i class="fa fa-check"></i>Problem 1</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="chapter-14-strings.html"><a href="chapter-14-strings.html#extract-matches"><i class="fa fa-check"></i>14.4.3 - Extract Matches</a><ul>
<li class="chapter" data-level="" data-path="chapter-14-strings.html"><a href="chapter-14-strings.html#problem-1-32"><i class="fa fa-check"></i>Problem 1</a></li>
<li class="chapter" data-level="" data-path="chapter-14-strings.html"><a href="chapter-14-strings.html#problem-2-31"><i class="fa fa-check"></i>Problem 2</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="chapter-14-strings.html"><a href="chapter-14-strings.html#grouped-matches"><i class="fa fa-check"></i>14.4.4 - Grouped matches</a><ul>
<li class="chapter" data-level="" data-path="chapter-14-strings.html"><a href="chapter-14-strings.html#problem-1-33"><i class="fa fa-check"></i>Problem 1</a></li>
<li class="chapter" data-level="" data-path="chapter-14-strings.html"><a href="chapter-14-strings.html#problem-2-32"><i class="fa fa-check"></i>Problem 2</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="chapter-14-strings.html"><a href="chapter-14-strings.html#replacing-matches"><i class="fa fa-check"></i>14.4.5 - Replacing matches</a><ul>
<li class="chapter" data-level="" data-path="chapter-14-strings.html"><a href="chapter-14-strings.html#problem-1-34"><i class="fa fa-check"></i>Problem 1</a></li>
<li class="chapter" data-level="" data-path="chapter-14-strings.html"><a href="chapter-14-strings.html#problem-2-33"><i class="fa fa-check"></i>Problem 2</a></li>
<li class="chapter" data-level="" data-path="chapter-14-strings.html"><a href="chapter-14-strings.html#problem-3-28"><i class="fa fa-check"></i>Problem 3</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="chapter-14-strings.html"><a href="chapter-14-strings.html#splitting"><i class="fa fa-check"></i>14.4.6 - Splitting</a><ul>
<li class="chapter" data-level="" data-path="chapter-14-strings.html"><a href="chapter-14-strings.html#problem-1-35"><i class="fa fa-check"></i>Problem 1</a></li>
<li class="chapter" data-level="" data-path="chapter-14-strings.html"><a href="chapter-14-strings.html#problem-2-34"><i class="fa fa-check"></i>Problem 2</a></li>
<li class="chapter" data-level="" data-path="chapter-14-strings.html"><a href="chapter-14-strings.html#problem-3-29"><i class="fa fa-check"></i>Problem 3</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="chapter-14-strings.html"><a href="chapter-14-strings.html#other-types-of-pattern"><i class="fa fa-check"></i>14.5 - Other types of pattern</a><ul>
<li class="chapter" data-level="" data-path="chapter-14-strings.html"><a href="chapter-14-strings.html#problem-1-36"><i class="fa fa-check"></i>Problem 1</a></li>
<li class="chapter" data-level="" data-path="chapter-14-strings.html"><a href="chapter-14-strings.html#problem-2-35"><i class="fa fa-check"></i>Problem 2</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="chapter-14-strings.html"><a href="chapter-14-strings.html#other-uses-of-regular-expressions"><i class="fa fa-check"></i>14.6 - Other uses of regular expressions</a><ul>
<li class="chapter" data-level="" data-path="chapter-14-strings.html"><a href="chapter-14-strings.html#problem-1-37"><i class="fa fa-check"></i>Problem 1</a></li>
<li class="chapter" data-level="" data-path="chapter-14-strings.html"><a href="chapter-14-strings.html#problem-2-36"><i class="fa fa-check"></i>Problem 2</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="" data-path="chapter-15-factors.html"><a href="chapter-15-factors.html"><i class="fa fa-check"></i>Chapter 15 - Factors</a><ul>
<li class="chapter" data-level="" data-path="chapter-15-factors.html"><a href="chapter-15-factors.html#general-social-survey"><i class="fa fa-check"></i>15.3 - General Social Survey</a><ul>
<li class="chapter" data-level="" data-path="chapter-15-factors.html"><a href="chapter-15-factors.html#problem-1-38"><i class="fa fa-check"></i>Problem 1</a></li>
<li class="chapter" data-level="" data-path="chapter-15-factors.html"><a href="chapter-15-factors.html#problem-2-37"><i class="fa fa-check"></i>Problem 2</a></li>
<li class="chapter" data-level="" data-path="chapter-15-factors.html"><a href="chapter-15-factors.html#problem-3-30"><i class="fa fa-check"></i>Problem 3</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="chapter-15-factors.html"><a href="chapter-15-factors.html#modifying-factor-order"><i class="fa fa-check"></i>15.4 - Modifying factor order</a><ul>
<li class="chapter" data-level="" data-path="chapter-15-factors.html"><a href="chapter-15-factors.html#problem-1-39"><i class="fa fa-check"></i>Problem 1</a></li>
<li class="chapter" data-level="" data-path="chapter-15-factors.html"><a href="chapter-15-factors.html#problem-2-38"><i class="fa fa-check"></i>Problem 2</a></li>
<li class="chapter" data-level="" data-path="chapter-15-factors.html"><a href="chapter-15-factors.html#problem-3-31"><i class="fa fa-check"></i>Problem 3</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="chapter-15-factors.html"><a href="chapter-15-factors.html#modifying-factor-levels"><i class="fa fa-check"></i>15.5 - Modifying factor levels</a><ul>
<li class="chapter" data-level="" data-path="chapter-15-factors.html"><a href="chapter-15-factors.html#problem-1-40"><i class="fa fa-check"></i>Problem 1</a></li>
<li class="chapter" data-level="" data-path="chapter-15-factors.html"><a href="chapter-15-factors.html#problem-2-39"><i class="fa fa-check"></i>Problem 2</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="" data-path="chapter-16-dates-and-times.html"><a href="chapter-16-dates-and-times.html"><i class="fa fa-check"></i>Chapter 16 - Dates and times</a><ul>
<li class="chapter" data-level="" data-path="chapter-16-dates-and-times.html"><a href="chapter-16-dates-and-times.html#creating-datetimes"><i class="fa fa-check"></i>16.2 - Creating date/times</a><ul>
<li class="chapter" data-level="" data-path="chapter-16-dates-and-times.html"><a href="chapter-16-dates-and-times.html#problem-1-41"><i class="fa fa-check"></i>Problem 1</a></li>
<li class="chapter" data-level="" data-path="chapter-16-dates-and-times.html"><a href="chapter-16-dates-and-times.html#problem-2-40"><i class="fa fa-check"></i>Problem 2</a></li>
<li class="chapter" data-level="" data-path="chapter-16-dates-and-times.html"><a href="chapter-16-dates-and-times.html#problem-3-32"><i class="fa fa-check"></i>Problem 3</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="chapter-16-dates-and-times.html"><a href="chapter-16-dates-and-times.html#date-time-components"><i class="fa fa-check"></i>16.3 - Date-time components</a><ul>
<li class="chapter" data-level="" data-path="chapter-16-dates-and-times.html"><a href="chapter-16-dates-and-times.html#problem-1-42"><i class="fa fa-check"></i>Problem 1</a></li>
<li class="chapter" data-level="" data-path="chapter-16-dates-and-times.html"><a href="chapter-16-dates-and-times.html#problem-2-41"><i class="fa fa-check"></i>Problem 2</a></li>
<li class="chapter" data-level="" data-path="chapter-16-dates-and-times.html"><a href="chapter-16-dates-and-times.html#problem-3-33"><i class="fa fa-check"></i>Problem 3</a></li>
<li class="chapter" data-level="" data-path="chapter-16-dates-and-times.html"><a href="chapter-16-dates-and-times.html#problem-4-25"><i class="fa fa-check"></i>Problem 4</a></li>
<li class="chapter" data-level="" data-path="chapter-16-dates-and-times.html"><a href="chapter-16-dates-and-times.html#problem-5-15"><i class="fa fa-check"></i>Problem 5</a></li>
<li class="chapter" data-level="" data-path="chapter-16-dates-and-times.html"><a href="chapter-16-dates-and-times.html#problem-6-10"><i class="fa fa-check"></i>Problem 6</a></li>
<li class="chapter" data-level="" data-path="chapter-16-dates-and-times.html"><a href="chapter-16-dates-and-times.html#problem-7-2"><i class="fa fa-check"></i>Problem 7</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="chapter-16-dates-and-times.html"><a href="chapter-16-dates-and-times.html#time-spans"><i class="fa fa-check"></i>16.4 - Time spans</a><ul>
<li class="chapter" data-level="" data-path="chapter-16-dates-and-times.html"><a href="chapter-16-dates-and-times.html#problem-1-43"><i class="fa fa-check"></i>Problem 1</a></li>
<li class="chapter" data-level="" data-path="chapter-16-dates-and-times.html"><a href="chapter-16-dates-and-times.html#problem-2-42"><i class="fa fa-check"></i>Problem 2</a></li>
<li class="chapter" data-level="" data-path="chapter-16-dates-and-times.html"><a href="chapter-16-dates-and-times.html#problem-3-34"><i class="fa fa-check"></i>Problem 3</a></li>
<li class="chapter" data-level="" data-path="chapter-16-dates-and-times.html"><a href="chapter-16-dates-and-times.html#problem-4-26"><i class="fa fa-check"></i>Problem 4</a></li>
<li class="chapter" data-level="" data-path="chapter-16-dates-and-times.html"><a href="chapter-16-dates-and-times.html#problem-5-16"><i class="fa fa-check"></i>Problem 5</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="" data-path="chapter-19-functions.html"><a href="chapter-19-functions.html"><i class="fa fa-check"></i>Chapter 19 - Functions</a><ul>
<li class="chapter" data-level="" data-path="chapter-19-functions.html"><a href="chapter-19-functions.html#when-should-you-write-a-function"><i class="fa fa-check"></i>19.2 - When should you write a function?</a><ul>
<li class="chapter" data-level="" data-path="chapter-19-functions.html"><a href="chapter-19-functions.html#problem-1-44"><i class="fa fa-check"></i>Problem 1</a></li>
<li class="chapter" data-level="" data-path="chapter-19-functions.html"><a href="chapter-19-functions.html#problem-2-43"><i class="fa fa-check"></i>Problem 2</a></li>
<li class="chapter" data-level="" data-path="chapter-19-functions.html"><a href="chapter-19-functions.html#problem-3-35"><i class="fa fa-check"></i>Problem 3</a></li>
<li class="chapter" data-level="" data-path="chapter-19-functions.html"><a href="chapter-19-functions.html#problem-4-27"><i class="fa fa-check"></i>Problem 4</a></li>
<li class="chapter" data-level="" data-path="chapter-19-functions.html"><a href="chapter-19-functions.html#problem-5-17"><i class="fa fa-check"></i>Problem 5</a></li>
<li class="chapter" data-level="" data-path="chapter-19-functions.html"><a href="chapter-19-functions.html#problem-6-11"><i class="fa fa-check"></i>Problem 6</a></li>
<li class="chapter" data-level="" data-path="chapter-19-functions.html"><a href="chapter-19-functions.html#problem-7-3"><i class="fa fa-check"></i>Problem 7</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="chapter-19-functions.html"><a href="chapter-19-functions.html#functions-are-for-humans-and-computers"><i class="fa fa-check"></i>19.3 - Functions are for humans and computers</a><ul>
<li class="chapter" data-level="" data-path="chapter-19-functions.html"><a href="chapter-19-functions.html#problem-1-45"><i class="fa fa-check"></i>Problem 1</a></li>
<li class="chapter" data-level="" data-path="chapter-19-functions.html"><a href="chapter-19-functions.html#problem-2-44"><i class="fa fa-check"></i>Problem 2</a></li>
<li class="chapter" data-level="" data-path="chapter-19-functions.html"><a href="chapter-19-functions.html#problem-3-36"><i class="fa fa-check"></i>Problem 3</a></li>
<li class="chapter" data-level="" data-path="chapter-19-functions.html"><a href="chapter-19-functions.html#problem-4-28"><i class="fa fa-check"></i>Problem 4</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="chapter-19-functions.html"><a href="chapter-19-functions.html#conditional-execution"><i class="fa fa-check"></i>19.4 - Conditional execution</a><ul>
<li class="chapter" data-level="" data-path="chapter-19-functions.html"><a href="chapter-19-functions.html#problem-1-46"><i class="fa fa-check"></i>Problem 1</a></li>
<li class="chapter" data-level="" data-path="chapter-19-functions.html"><a href="chapter-19-functions.html#problem-2-45"><i class="fa fa-check"></i>Problem 2</a></li>
<li class="chapter" data-level="" data-path="chapter-19-functions.html"><a href="chapter-19-functions.html#problem-3-37"><i class="fa fa-check"></i>Problem 3</a></li>
<li class="chapter" data-level="" data-path="chapter-19-functions.html"><a href="chapter-19-functions.html#problem-4-29"><i class="fa fa-check"></i>Problem 4</a></li>
<li class="chapter" data-level="" data-path="chapter-19-functions.html"><a href="chapter-19-functions.html#problem-5-18"><i class="fa fa-check"></i>Problem 5</a></li>
<li class="chapter" data-level="" data-path="chapter-19-functions.html"><a href="chapter-19-functions.html#problem-6-12"><i class="fa fa-check"></i>Problem 6</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="chapter-19-functions.html"><a href="chapter-19-functions.html#function-arguments"><i class="fa fa-check"></i>19.5 - Function arguments</a><ul>
<li class="chapter" data-level="" data-path="chapter-19-functions.html"><a href="chapter-19-functions.html#problem-1-47"><i class="fa fa-check"></i>Problem 1</a></li>
<li class="chapter" data-level="" data-path="chapter-19-functions.html"><a href="chapter-19-functions.html#problem-2-46"><i class="fa fa-check"></i>Problem 2</a></li>
<li class="chapter" data-level="" data-path="chapter-19-functions.html"><a href="chapter-19-functions.html#problem-3-38"><i class="fa fa-check"></i>Problem 3</a></li>
<li class="chapter" data-level="" data-path="chapter-19-functions.html"><a href="chapter-19-functions.html#problem-4-30"><i class="fa fa-check"></i>Problem 4</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="" data-path="chapter-20-vectors.html"><a href="chapter-20-vectors.html"><i class="fa fa-check"></i>Chapter 20 - Vectors</a><ul>
<li class="chapter" data-level="" data-path="chapter-20-vectors.html"><a href="chapter-20-vectors.html#important-types-of-atomic-vector"><i class="fa fa-check"></i>20.3 - Important types of atomic vector</a><ul>
<li class="chapter" data-level="" data-path="chapter-20-vectors.html"><a href="chapter-20-vectors.html#problem-1-48"><i class="fa fa-check"></i>Problem 1</a></li>
<li class="chapter" data-level="" data-path="chapter-20-vectors.html"><a href="chapter-20-vectors.html#problem-2-47"><i class="fa fa-check"></i>Problem 2</a></li>
<li class="chapter" data-level="" data-path="chapter-20-vectors.html"><a href="chapter-20-vectors.html#problem-3-39"><i class="fa fa-check"></i>Problem 3</a></li>
<li class="chapter" data-level="" data-path="chapter-20-vectors.html"><a href="chapter-20-vectors.html#problem-4-31"><i class="fa fa-check"></i>Problem 4</a></li>
<li class="chapter" data-level="" data-path="chapter-20-vectors.html"><a href="chapter-20-vectors.html#problem-5-19"><i class="fa fa-check"></i>Problem 5</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="chapter-20-vectors.html"><a href="chapter-20-vectors.html#using-atomic-vectors"><i class="fa fa-check"></i>20.4 - Using atomic vectors</a><ul>
<li class="chapter" data-level="" data-path="chapter-20-vectors.html"><a href="chapter-20-vectors.html#problem-1-49"><i class="fa fa-check"></i>Problem 1</a></li>
<li class="chapter" data-level="" data-path="chapter-20-vectors.html"><a href="chapter-20-vectors.html#problem-2-48"><i class="fa fa-check"></i>Problem 2</a></li>
<li class="chapter" data-level="" data-path="chapter-20-vectors.html"><a href="chapter-20-vectors.html#problem-3-40"><i class="fa fa-check"></i>Problem 3</a></li>
<li class="chapter" data-level="" data-path="chapter-20-vectors.html"><a href="chapter-20-vectors.html#problem-4-32"><i class="fa fa-check"></i>Problem 4</a></li>
<li class="chapter" data-level="" data-path="chapter-20-vectors.html"><a href="chapter-20-vectors.html#problem-5-20"><i class="fa fa-check"></i>Problem 5</a></li>
<li class="chapter" data-level="" data-path="chapter-20-vectors.html"><a href="chapter-20-vectors.html#problem-6-13"><i class="fa fa-check"></i>Problem 6</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="chapter-20-vectors.html"><a href="chapter-20-vectors.html#recursive-vectors-lists"><i class="fa fa-check"></i>20.5 - Recursive vectors (lists)</a><ul>
<li class="chapter" data-level="" data-path="chapter-20-vectors.html"><a href="chapter-20-vectors.html#problem-1-50"><i class="fa fa-check"></i>Problem 1</a></li>
<li class="chapter" data-level="" data-path="chapter-20-vectors.html"><a href="chapter-20-vectors.html#problem-2-49"><i class="fa fa-check"></i>Problem 2</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="chapter-20-vectors.html"><a href="chapter-20-vectors.html#augmented-vectors"><i class="fa fa-check"></i>20.7 - Augmented vectors</a><ul>
<li class="chapter" data-level="" data-path="chapter-20-vectors.html"><a href="chapter-20-vectors.html#problem-1-51"><i class="fa fa-check"></i>Problem 1</a></li>
<li class="chapter" data-level="" data-path="chapter-20-vectors.html"><a href="chapter-20-vectors.html#problem-2-50"><i class="fa fa-check"></i>Problem 2</a></li>
<li class="chapter" data-level="" data-path="chapter-20-vectors.html"><a href="chapter-20-vectors.html#problem-3-41"><i class="fa fa-check"></i>Problem 3</a></li>
</ul></li>
</ul></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">R for Data Science Solution Set</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="chapter-5---data-transformation" class="section level1 unnumbered">
<h1>Chapter 5 - Data Transformation</h1>
<p>Load the libraries needed for these exercises.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(tidyverse)
<span class="kw">library</span>(nycflights13)</code></pre></div>
<div id="filter-rows-with-filter" class="section level2 unnumbered">
<h2>5.2 - Filter Rows with filter()</h2>
<div id="problem-1-7" class="section level3 unnumbered">
<h3>Problem 1</h3>
<p>Find all flights that:</p>
<ul>
<li>Had an arrival delay of two or more hours</li>
</ul>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">flights <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">filter</span>(arr_delay <span class="op">&gt;=</span><span class="st"> </span><span class="dv">120</span>) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">count</span>()</code></pre></div>
<pre><code>## # A tibble: 1 x 1
##       n
##   &lt;int&gt;
## 1 10200</code></pre>
<ul>
<li>Flew to Houston (IAH or HOU)</li>
</ul>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">flights <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">filter</span>(dest <span class="op">%in%</span><span class="st"> </span><span class="kw">c</span>(<span class="st">&#39;IAH&#39;</span>, <span class="st">&#39;HOU&#39;</span>)) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">count</span>()</code></pre></div>
<pre><code>## # A tibble: 1 x 1
##       n
##   &lt;int&gt;
## 1  9313</code></pre>
<ul>
<li>Were operated by United, American, or Delta</li>
</ul>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">flights <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">filter</span>(carrier <span class="op">%in%</span><span class="st"> </span><span class="kw">c</span>(<span class="st">&#39;UA&#39;</span>, <span class="st">&#39;AA&#39;</span>, <span class="st">&#39;DL&#39;</span>)) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">count</span>()</code></pre></div>
<pre><code>## # A tibble: 1 x 1
##        n
##    &lt;int&gt;
## 1 139504</code></pre>
<ul>
<li>Departed in summer (July, August, and September)</li>
</ul>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">flights <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">filter</span>(month <span class="op">%in%</span><span class="st"> </span><span class="kw">c</span>(<span class="dv">7</span>, <span class="dv">8</span>, <span class="dv">9</span>)) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">count</span>()</code></pre></div>
<pre><code>## # A tibble: 1 x 1
##       n
##   &lt;int&gt;
## 1 86326</code></pre>
<ul>
<li>Arrived more than two hours late, but didn’t leave late</li>
</ul>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">flights <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">filter</span>(arr_delay <span class="op">&gt;=</span><span class="st"> </span><span class="dv">120</span>, dep_delay <span class="op">&lt;=</span><span class="st"> </span><span class="dv">0</span>) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">count</span>()</code></pre></div>
<pre><code>## # A tibble: 1 x 1
##       n
##   &lt;int&gt;
## 1    29</code></pre>
<ul>
<li>Were delayed by at least an hour, but made up over 30 minutes in flight</li>
</ul>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">flights <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">filter</span>(dep_delay <span class="op">&gt;=</span><span class="st"> </span><span class="dv">60</span>, arr_delay <span class="op">&lt;=</span><span class="st"> </span>dep_delay <span class="op">-</span><span class="st"> </span><span class="dv">30</span>) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">count</span>()</code></pre></div>
<pre><code>## # A tibble: 1 x 1
##       n
##   &lt;int&gt;
## 1  2074</code></pre>
<ul>
<li>Departed between midnight and 6am (inclusive)</li>
</ul>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">flights <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">filter</span>(dep_time <span class="op">&gt;=</span><span class="st"> </span><span class="dv">0</span>, dep_time <span class="op">&lt;=</span><span class="st"> </span><span class="dv">600</span>) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">count</span>()</code></pre></div>
<pre><code>## # A tibble: 1 x 1
##       n
##   &lt;int&gt;
## 1  9344</code></pre>
</div>
<div id="problem-2-7" class="section level3 unnumbered">
<h3>Problem 2</h3>
<p>Another useful dplyr filtering helper is <code>between()</code>. What does it do? Can you use it to simplify the code needed to answer the previous challenges?</p>
<p><code>between()</code> is a shortcut for <code>x &gt;= left &amp; x &lt;= right</code>. We can simplify the last answer to Problem 1 as:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">flights <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">filter</span>(<span class="kw">between</span>(dep_time, <span class="dv">0</span>, <span class="dv">600</span>)) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">count</span>()</code></pre></div>
<pre><code>## # A tibble: 1 x 1
##       n
##   &lt;int&gt;
## 1  9344</code></pre>
</div>
<div id="problem-3-7" class="section level3 unnumbered">
<h3>Problem 3</h3>
<p>How many flights have a missing dep_time? What other variables are missing? What might these rows represent?</p>
<p>We use <code>is.na()</code> to filter the flights with a missing departure time.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">flights <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">filter</span>(<span class="kw">is.na</span>(dep_time)) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">count</span>()</code></pre></div>
<pre><code>## # A tibble: 1 x 1
##       n
##   &lt;int&gt;
## 1  8255</code></pre>
<p>Using <code>summary()</code> to see the breakout of the other variables, there appear to be flights that were cancelled.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">flights <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">filter</span>(<span class="kw">is.na</span>(dep_time)) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">summary</span>()</code></pre></div>
<pre><code>##       year          month             day          dep_time   
##  Min.   :2013   Min.   : 1.000   Min.   : 1.0   Min.   : NA   
##  1st Qu.:2013   1st Qu.: 3.000   1st Qu.: 8.0   1st Qu.: NA   
##  Median :2013   Median : 6.000   Median :12.0   Median : NA   
##  Mean   :2013   Mean   : 5.927   Mean   :14.6   Mean   :NaN   
##  3rd Qu.:2013   3rd Qu.: 8.000   3rd Qu.:23.0   3rd Qu.: NA   
##  Max.   :2013   Max.   :12.000   Max.   :31.0   Max.   : NA   
##                                                 NA&#39;s   :8255  
##  sched_dep_time   dep_delay       arr_time    sched_arr_time
##  Min.   : 106   Min.   : NA    Min.   : NA    Min.   :   1  
##  1st Qu.:1159   1st Qu.: NA    1st Qu.: NA    1st Qu.:1330  
##  Median :1559   Median : NA    Median : NA    Median :1749  
##  Mean   :1492   Mean   :NaN    Mean   :NaN    Mean   :1669  
##  3rd Qu.:1855   3rd Qu.: NA    3rd Qu.: NA    3rd Qu.:2049  
##  Max.   :2359   Max.   : NA    Max.   : NA    Max.   :2359  
##                 NA&#39;s   :8255   NA&#39;s   :8255                 
##    arr_delay      carrier              flight       tailnum         
##  Min.   : NA    Length:8255        Min.   :   1   Length:8255       
##  1st Qu.: NA    Class :character   1st Qu.:1577   Class :character  
##  Median : NA    Mode  :character   Median :3535   Mode  :character  
##  Mean   :NaN                       Mean   :3063                     
##  3rd Qu.: NA                       3rd Qu.:4373                     
##  Max.   : NA                       Max.   :6177                     
##  NA&#39;s   :8255                                                       
##     origin              dest              air_time       distance     
##  Length:8255        Length:8255        Min.   : NA    Min.   :  17.0  
##  Class :character   Class :character   1st Qu.: NA    1st Qu.: 292.0  
##  Mode  :character   Mode  :character   Median : NA    Median : 583.0  
##                                        Mean   :NaN    Mean   : 695.4  
##                                        3rd Qu.: NA    3rd Qu.: 872.0  
##                                        Max.   : NA    Max.   :4963.0  
##                                        NA&#39;s   :8255                   
##       hour           minute        time_hour                  
##  Min.   : 1.00   Min.   : 0.00   Min.   :2013-01-01 06:00:00  
##  1st Qu.:11.00   1st Qu.: 5.00   1st Qu.:2013-03-07 07:00:00  
##  Median :15.00   Median :27.00   Median :2013-06-12 18:00:00  
##  Mean   :14.67   Mean   :25.61   Mean   :2013-06-13 06:42:11  
##  3rd Qu.:18.00   3rd Qu.:42.00   3rd Qu.:2013-08-22 15:30:00  
##  Max.   :23.00   Max.   :59.00   Max.   :2013-12-31 20:00:00  
## </code></pre>
</div>
<div id="problem-4-7" class="section level3 unnumbered">
<h3>Problem 4</h3>
<p>Why is NA ^ 0 not missing? Why is NA | TRUE not missing? Why is FALSE &amp; NA not missing? Can you figure out the general rule? (NA * 0 is a tricky counterexample!)</p>
<p>Working through these examples: * Anything to the zero power is 1 * Anything OR <code>TRUE</code> is <code>TRUE</code> * Anything AND <code>FALSE</code> is <code>FALSE</code></p>
<p>These results apply no matter what the LHS side, and so will apply to NA as well.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="ot">NA</span> <span class="op">^</span><span class="st"> </span><span class="dv">0</span></code></pre></div>
<pre><code>## [1] 1</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="ot">NA</span> <span class="op">|</span><span class="st"> </span><span class="ot">TRUE</span></code></pre></div>
<pre><code>## [1] TRUE</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="ot">NA</span> <span class="op">&amp;</span><span class="st"> </span><span class="ot">FALSE</span></code></pre></div>
<pre><code>## [1] FALSE</code></pre>
<p>However operations on NA will return NA. NA * 0 is counter intuitive since you would think that anything multiplied by 0 would be 0.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="ot">NA</span> <span class="op">*</span><span class="st"> </span><span class="dv">0</span></code></pre></div>
<pre><code>## [1] NA</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="ot">NA</span> <span class="op">^</span><span class="st"> </span><span class="dv">2</span></code></pre></div>
<pre><code>## [1] NA</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="ot">NA</span> <span class="op">+</span><span class="st"> </span><span class="dv">1</span></code></pre></div>
<pre><code>## [1] NA</code></pre>
</div>
</div>
<div id="arrange-rows-with-arrange" class="section level2 unnumbered">
<h2>5.3 - Arrange Rows with arrange()</h2>
<div id="problem-1-8" class="section level3 unnumbered">
<h3>Problem 1</h3>
<p>How could you use arrange() to sort all missing values to the start? (Hint: use is.na()).</p>
<p>We can sort missing values using the format:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">flights <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">arrange</span>(<span class="kw">desc</span>(<span class="kw">is.na</span>(dep_time))) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">head</span>()</code></pre></div>
<pre><code>## # A tibble: 6 x 19
##    year month   day dep_time sched_dep_time dep_delay arr_time
##   &lt;int&gt; &lt;int&gt; &lt;int&gt;    &lt;int&gt;          &lt;int&gt;     &lt;dbl&gt;    &lt;int&gt;
## 1  2013     1     1       NA           1630        NA       NA
## 2  2013     1     1       NA           1935        NA       NA
## 3  2013     1     1       NA           1500        NA       NA
## 4  2013     1     1       NA            600        NA       NA
## 5  2013     1     2       NA           1540        NA       NA
## 6  2013     1     2       NA           1620        NA       NA
## # ... with 12 more variables: sched_arr_time &lt;int&gt;, arr_delay &lt;dbl&gt;,
## #   carrier &lt;chr&gt;, flight &lt;int&gt;, tailnum &lt;chr&gt;, origin &lt;chr&gt;, dest &lt;chr&gt;,
## #   air_time &lt;dbl&gt;, distance &lt;dbl&gt;, hour &lt;dbl&gt;, minute &lt;dbl&gt;,
## #   time_hour &lt;dttm&gt;</code></pre>
</div>
<div id="problem-2-8" class="section level3 unnumbered">
<h3>Problem 2</h3>
<p>Sort flights to find the most delayed flights. Find the flights that left earliest.</p>
<p>The most delayed flights (by <code>arr_delay</code>) are:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">flights <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">arrange</span>(<span class="kw">desc</span>(arr_delay)) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">head</span>()</code></pre></div>
<pre><code>## # A tibble: 6 x 19
##    year month   day dep_time sched_dep_time dep_delay arr_time
##   &lt;int&gt; &lt;int&gt; &lt;int&gt;    &lt;int&gt;          &lt;int&gt;     &lt;dbl&gt;    &lt;int&gt;
## 1  2013     1     9      641            900     1301.     1242
## 2  2013     6    15     1432           1935     1137.     1607
## 3  2013     1    10     1121           1635     1126.     1239
## 4  2013     9    20     1139           1845     1014.     1457
## 5  2013     7    22      845           1600     1005.     1044
## 6  2013     4    10     1100           1900      960.     1342
## # ... with 12 more variables: sched_arr_time &lt;int&gt;, arr_delay &lt;dbl&gt;,
## #   carrier &lt;chr&gt;, flight &lt;int&gt;, tailnum &lt;chr&gt;, origin &lt;chr&gt;, dest &lt;chr&gt;,
## #   air_time &lt;dbl&gt;, distance &lt;dbl&gt;, hour &lt;dbl&gt;, minute &lt;dbl&gt;,
## #   time_hour &lt;dttm&gt;</code></pre>
<p>The flights that left earliest (by <code>dep_delay</code>) are:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">flights <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">arrange</span>(dep_delay) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">head</span>()</code></pre></div>
<pre><code>## # A tibble: 6 x 19
##    year month   day dep_time sched_dep_time dep_delay arr_time
##   &lt;int&gt; &lt;int&gt; &lt;int&gt;    &lt;int&gt;          &lt;int&gt;     &lt;dbl&gt;    &lt;int&gt;
## 1  2013    12     7     2040           2123      -43.       40
## 2  2013     2     3     2022           2055      -33.     2240
## 3  2013    11    10     1408           1440      -32.     1549
## 4  2013     1    11     1900           1930      -30.     2233
## 5  2013     1    29     1703           1730      -27.     1947
## 6  2013     8     9      729            755      -26.     1002
## # ... with 12 more variables: sched_arr_time &lt;int&gt;, arr_delay &lt;dbl&gt;,
## #   carrier &lt;chr&gt;, flight &lt;int&gt;, tailnum &lt;chr&gt;, origin &lt;chr&gt;, dest &lt;chr&gt;,
## #   air_time &lt;dbl&gt;, distance &lt;dbl&gt;, hour &lt;dbl&gt;, minute &lt;dbl&gt;,
## #   time_hour &lt;dttm&gt;</code></pre>
</div>
<div id="problem-3-8" class="section level3 unnumbered">
<h3>Problem 3</h3>
<p>Sort flights to find the fastest flights.</p>
<p>We first calculate average speed in MPH as distance / hours in the air, and sort on the calculated variable.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">flights <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">mutate</span>(<span class="dt">speed =</span> distance <span class="op">/</span><span class="st"> </span>(air_time <span class="op">/</span><span class="st"> </span><span class="dv">60</span>)) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">arrange</span>(<span class="kw">desc</span>(speed)) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">select</span>(speed) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">head</span>()</code></pre></div>
<pre><code>## # A tibble: 6 x 1
##   speed
##   &lt;dbl&gt;
## 1  703.
## 2  650.
## 3  648.
## 4  641.
## 5  591.
## 6  564.</code></pre>
</div>
<div id="problem-4-8" class="section level3 unnumbered">
<h3>Problem 4</h3>
<p>Which flights traveled the longest? Which traveled the shortest?</p>
<p>The longest flights are:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">flights <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">arrange</span>(<span class="kw">desc</span>(distance)) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">head</span>()</code></pre></div>
<pre><code>## # A tibble: 6 x 19
##    year month   day dep_time sched_dep_time dep_delay arr_time
##   &lt;int&gt; &lt;int&gt; &lt;int&gt;    &lt;int&gt;          &lt;int&gt;     &lt;dbl&gt;    &lt;int&gt;
## 1  2013     1     1      857            900       -3.     1516
## 2  2013     1     2      909            900        9.     1525
## 3  2013     1     3      914            900       14.     1504
## 4  2013     1     4      900            900        0.     1516
## 5  2013     1     5      858            900       -2.     1519
## 6  2013     1     6     1019            900       79.     1558
## # ... with 12 more variables: sched_arr_time &lt;int&gt;, arr_delay &lt;dbl&gt;,
## #   carrier &lt;chr&gt;, flight &lt;int&gt;, tailnum &lt;chr&gt;, origin &lt;chr&gt;, dest &lt;chr&gt;,
## #   air_time &lt;dbl&gt;, distance &lt;dbl&gt;, hour &lt;dbl&gt;, minute &lt;dbl&gt;,
## #   time_hour &lt;dttm&gt;</code></pre>
<p>The shortest flights are:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">flights <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">arrange</span>(distance) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">head</span>()</code></pre></div>
<pre><code>## # A tibble: 6 x 19
##    year month   day dep_time sched_dep_time dep_delay arr_time
##   &lt;int&gt; &lt;int&gt; &lt;int&gt;    &lt;int&gt;          &lt;int&gt;     &lt;dbl&gt;    &lt;int&gt;
## 1  2013     7    27       NA            106       NA        NA
## 2  2013     1     3     2127           2129       -2.     2222
## 3  2013     1     4     1240           1200       40.     1333
## 4  2013     1     4     1829           1615      134.     1937
## 5  2013     1     4     2128           2129       -1.     2218
## 6  2013     1     5     1155           1200       -5.     1241
## # ... with 12 more variables: sched_arr_time &lt;int&gt;, arr_delay &lt;dbl&gt;,
## #   carrier &lt;chr&gt;, flight &lt;int&gt;, tailnum &lt;chr&gt;, origin &lt;chr&gt;, dest &lt;chr&gt;,
## #   air_time &lt;dbl&gt;, distance &lt;dbl&gt;, hour &lt;dbl&gt;, minute &lt;dbl&gt;,
## #   time_hour &lt;dttm&gt;</code></pre>
</div>
</div>
<div id="select-columns-with-select" class="section level2 unnumbered">
<h2>5.4 - Select Columns with select()</h2>
<div id="problem-1-9" class="section level3 unnumbered">
<h3>Problem 1</h3>
<p>Brainstorm as many ways as possible to select <code>dep_time</code>, <code>dep_delay</code>, <code>arr_time</code>, and <code>arr_delay</code> from flights.</p>
<p>We can put all the variables directly into our <code>select()</code> statement:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">flights <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">select</span>(dep_time, dep_delay, arr_time, arr_delay) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">head</span>()</code></pre></div>
<pre><code>## # A tibble: 6 x 4
##   dep_time dep_delay arr_time arr_delay
##      &lt;int&gt;     &lt;dbl&gt;    &lt;int&gt;     &lt;dbl&gt;
## 1      517        2.      830       11.
## 2      533        4.      850       20.
## 3      542        2.      923       33.
## 4      544       -1.     1004      -18.
## 5      554       -6.      812      -25.
## 6      554       -4.      740       12.</code></pre>
<p>Or this would be a good place to try the <code>starts_with()</code> function:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">flights <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">select</span>(<span class="kw">starts_with</span>(<span class="st">&quot;dep&quot;</span>), <span class="kw">starts_with</span>(<span class="st">&quot;arr&quot;</span>))</code></pre></div>
<pre><code>## # A tibble: 336,776 x 4
##    dep_time dep_delay arr_time arr_delay
##       &lt;int&gt;     &lt;dbl&gt;    &lt;int&gt;     &lt;dbl&gt;
##  1      517        2.      830       11.
##  2      533        4.      850       20.
##  3      542        2.      923       33.
##  4      544       -1.     1004      -18.
##  5      554       -6.      812      -25.
##  6      554       -4.      740       12.
##  7      555       -5.      913       19.
##  8      557       -3.      709      -14.
##  9      557       -3.      838       -8.
## 10      558       -2.      753        8.
## # ... with 336,766 more rows</code></pre>
<p>Or we can try a regex using <code>matches()</code></p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">flights <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">select</span>(<span class="kw">matches</span>(<span class="st">&quot;^dep&quot;</span>), <span class="kw">matches</span>(<span class="st">&quot;^arr&quot;</span>)) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">head</span>()</code></pre></div>
<pre><code>## # A tibble: 6 x 4
##   dep_time dep_delay arr_time arr_delay
##      &lt;int&gt;     &lt;dbl&gt;    &lt;int&gt;     &lt;dbl&gt;
## 1      517        2.      830       11.
## 2      533        4.      850       20.
## 3      542        2.      923       33.
## 4      544       -1.     1004      -18.
## 5      554       -6.      812      -25.
## 6      554       -4.      740       12.</code></pre>
</div>
<div id="problem-2-9" class="section level3 unnumbered">
<h3>Problem 2</h3>
<p>What happens if you include the name of a variable multiple times in a select() call?</p>
<p>Duplicating a variable within <code>select()</code> will still just return that variable one time:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">flights <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">select</span>(dep_time, dep_time) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">head</span>()</code></pre></div>
<pre><code>## # A tibble: 6 x 1
##   dep_time
##      &lt;int&gt;
## 1      517
## 2      533
## 3      542
## 4      544
## 5      554
## 6      554</code></pre>
</div>
<div id="problem-3-9" class="section level3 unnumbered">
<h3>Problem 3</h3>
<p>What does the one_of() function do? Why might it be helpful in conjunction with this vector?</p>
<p><code>one_of()</code> allows you select variables from within a character vector. We can pass <code>vars</code> to select everything from the vector:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">vars &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;year&quot;</span>, <span class="st">&quot;month&quot;</span>, <span class="st">&quot;day&quot;</span>, <span class="st">&quot;dep_delay&quot;</span>, <span class="st">&quot;arr_delay&quot;</span>)

flights <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">select</span>(<span class="kw">one_of</span>(vars))</code></pre></div>
<pre><code>## # A tibble: 336,776 x 5
##     year month   day dep_delay arr_delay
##    &lt;int&gt; &lt;int&gt; &lt;int&gt;     &lt;dbl&gt;     &lt;dbl&gt;
##  1  2013     1     1        2.       11.
##  2  2013     1     1        4.       20.
##  3  2013     1     1        2.       33.
##  4  2013     1     1       -1.      -18.
##  5  2013     1     1       -6.      -25.
##  6  2013     1     1       -4.       12.
##  7  2013     1     1       -5.       19.
##  8  2013     1     1       -3.      -14.
##  9  2013     1     1       -3.       -8.
## 10  2013     1     1       -2.        8.
## # ... with 336,766 more rows</code></pre>
</div>
<div id="problem-4-9" class="section level3 unnumbered">
<h3>Problem 4</h3>
<p>Does the result of running the following code surprise you? How do the select helpers deal with case by default? How can you change that default?</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">select</span>(flights, <span class="kw">contains</span>(<span class="st">&quot;TIME&quot;</span>)) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">head</span>()</code></pre></div>
<pre><code>## # A tibble: 6 x 6
##   dep_time sched_dep_time arr_time sched_arr_time air_time
##      &lt;int&gt;          &lt;int&gt;    &lt;int&gt;          &lt;int&gt;    &lt;dbl&gt;
## 1      517            515      830            819     227.
## 2      533            529      850            830     227.
## 3      542            540      923            850     160.
## 4      544            545     1004           1022     183.
## 5      554            600      812            837     116.
## 6      554            558      740            728     150.
## # ... with 1 more variable: time_hour &lt;dttm&gt;</code></pre>
<p><code>contains()</code> contains an argument <code>ignore.case</code> which defaults to <code>TRUE</code>, we can set this to <code>FALSE</code> if needed:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">select</span>(flights, <span class="kw">contains</span>(<span class="st">&quot;TIME&quot;</span>, <span class="dt">ignore.case =</span> <span class="ot">FALSE</span>)) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">head</span>()</code></pre></div>
<pre><code>## # A tibble: 6 x 0</code></pre>
</div>
</div>
<div id="add-new-variables-with-mutate" class="section level2 unnumbered">
<h2>5.5 - Add New Variables with mutate()</h2>
<div id="problem-1-10" class="section level3 unnumbered">
<h3>Problem 1</h3>
<p>Currently <code>dep_time</code> and <code>sched_dep_time</code> are convenient to look at, but hard to compute with because they’re not really continuous numbers. Convert them to a more convenient representation of number of minutes since midnight.</p>
<p>Use the modular arithmetic operators to break the time into its hours and minute components:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">flights <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">select</span>(dep_time, sched_dep_time) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">mutate</span>(<span class="dt">dep_time_cont =</span> ((dep_time <span class="op">%/%</span><span class="st"> </span><span class="dv">100</span>) <span class="op">*</span><span class="st"> </span><span class="dv">60</span> <span class="op">+</span><span class="st"> </span>(dep_time <span class="op">%%</span><span class="st"> </span><span class="dv">100</span>)),
         <span class="dt">sched_dep_time_cont =</span> ((sched_dep_time <span class="op">%/%</span><span class="st"> </span><span class="dv">100</span>) <span class="op">*</span><span class="st"> </span><span class="dv">60</span> <span class="op">+</span><span class="st"> </span>(sched_dep_time <span class="op">%%</span><span class="st"> </span><span class="dv">100</span>))) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">head</span>()</code></pre></div>
<pre><code>## # A tibble: 6 x 4
##   dep_time sched_dep_time dep_time_cont sched_dep_time_cont
##      &lt;int&gt;          &lt;int&gt;         &lt;dbl&gt;               &lt;dbl&gt;
## 1      517            515          317.                315.
## 2      533            529          333.                329.
## 3      542            540          342.                340.
## 4      544            545          344.                345.
## 5      554            600          354.                360.
## 6      554            558          354.                358.</code></pre>
</div>
<div id="problem-2-10" class="section level3 unnumbered">
<h3>Problem 2</h3>
<p>Compare <code>air_time</code> with <code>arr_time - dep_time</code>. What do you expect to see? What do you see? What do you need to do to fix it?</p>
<p>The issue is that <code>air_time</code> is in minutes, while <code>arr_time</code> and <code>dep_time</code> are not:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">flights <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">mutate</span>(<span class="dt">air_time_derived =</span> arr_time <span class="op">-</span><span class="st"> </span>dep_time) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">select</span>(air_time, air_time_derived) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">head</span>()</code></pre></div>
<pre><code>## # A tibble: 6 x 2
##   air_time air_time_derived
##      &lt;dbl&gt;            &lt;int&gt;
## 1     227.              313
## 2     227.              317
## 3     160.              381
## 4     183.              460
## 5     116.              258
## 6     150.              186</code></pre>
<p>Instead use the <code>mutate()</code> statement from Problem 1, however the two differ:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">flights <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">mutate</span>(<span class="dt">dep_time_cont =</span> ((dep_time <span class="op">%/%</span><span class="st"> </span><span class="dv">100</span>) <span class="op">*</span><span class="st"> </span><span class="dv">60</span> <span class="op">+</span><span class="st"> </span>(dep_time <span class="op">%%</span><span class="st"> </span><span class="dv">100</span>)),
         <span class="dt">arr_time_cont =</span> ((arr_time <span class="op">%/%</span><span class="st"> </span><span class="dv">100</span>) <span class="op">*</span><span class="st"> </span><span class="dv">60</span> <span class="op">+</span><span class="st"> </span>(arr_time <span class="op">%%</span><span class="st"> </span><span class="dv">100</span>)),
         <span class="dt">air_time_derived =</span> arr_time_cont <span class="op">-</span><span class="st"> </span>dep_time_cont) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">select</span>(air_time, air_time_derived) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">head</span>()</code></pre></div>
<pre><code>## # A tibble: 6 x 2
##   air_time air_time_derived
##      &lt;dbl&gt;            &lt;dbl&gt;
## 1     227.             193.
## 2     227.             197.
## 3     160.             221.
## 4     183.             260.
## 5     116.             138.
## 6     150.             106.</code></pre>
</div>
<div id="problem-3-10" class="section level3 unnumbered">
<h3>Problem 3</h3>
<p>Compare dep_time, sched_dep_time, and dep_delay. How would you expect those three numbers to be related?</p>
<p>We would expect <code>dep_delay</code> to be the difference between the <code>dep_time</code> and the <code>sched_dep_time</code>. But be sure to convert from time to continuous first:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">flights <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">mutate</span>(<span class="dt">dep_time_cont =</span> ((dep_time <span class="op">%/%</span><span class="st"> </span><span class="dv">100</span>) <span class="op">*</span><span class="st"> </span><span class="dv">60</span> <span class="op">+</span><span class="st"> </span>(dep_time <span class="op">%%</span><span class="st"> </span><span class="dv">100</span>)),
         <span class="dt">sched_dep_time_cont =</span> ((sched_dep_time <span class="op">%/%</span><span class="st"> </span><span class="dv">100</span>) <span class="op">*</span><span class="st"> </span><span class="dv">60</span> <span class="op">+</span><span class="st"> </span>(sched_dep_time <span class="op">%%</span><span class="st"> </span><span class="dv">100</span>)),
         <span class="dt">dep_delay_derived =</span> dep_time_cont <span class="op">-</span><span class="st"> </span>sched_dep_time_cont) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">select</span>(dep_delay, dep_delay_derived) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">head</span>()</code></pre></div>
<pre><code>## # A tibble: 6 x 2
##   dep_delay dep_delay_derived
##       &lt;dbl&gt;             &lt;dbl&gt;
## 1        2.                2.
## 2        4.                4.
## 3        2.                2.
## 4       -1.               -1.
## 5       -6.               -6.
## 6       -4.               -4.</code></pre>
</div>
<div id="problem-4-10" class="section level3 unnumbered">
<h3>Problem 4</h3>
<p>Find the 10 most delayed flights using a ranking function. How do you want to handle ties? Carefully read the documentation for <code>min_rank()</code>.</p>
<p>We’ll use <code>min_rank()</code> to rank the flights by <code>arr_delay</code>:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">flights <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">select</span>(arr_delay) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">mutate</span>(<span class="dt">most_delayed =</span> <span class="kw">min_rank</span>(<span class="op">-</span>arr_delay)) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">filter</span>(most_delayed <span class="op">&lt;=</span><span class="st"> </span><span class="dv">10</span>) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">arrange</span>(most_delayed)</code></pre></div>
<pre><code>## # A tibble: 10 x 2
##    arr_delay most_delayed
##        &lt;dbl&gt;        &lt;int&gt;
##  1     1272.            1
##  2     1127.            2
##  3     1109.            3
##  4     1007.            4
##  5      989.            5
##  6      931.            6
##  7      915.            7
##  8      895.            8
##  9      878.            9
## 10      875.           10</code></pre>
</div>
<div id="problem-5-5" class="section level3 unnumbered">
<h3>Problem 5</h3>
<p>What does <code>1:3 + 1:10</code> return? Why?</p>
<p>We get an error because <code>1:3</code> + <code>1:10</code> are not multiples of each other:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="dv">1</span><span class="op">:</span><span class="dv">3</span> <span class="op">+</span><span class="st"> </span><span class="dv">1</span><span class="op">:</span><span class="dv">10</span></code></pre></div>
<pre><code>## Warning in 1:3 + 1:10: longer object length is not a multiple of shorter
## object length</code></pre>
<pre><code>##  [1]  2  4  6  5  7  9  8 10 12 11</code></pre>
<p>Think through what is happening under the hood. This operation is recycling the shorter vector:</p>
<ul>
<li>1 + 1</li>
<li>2 + 2</li>
<li>3 + 3</li>
<li>4 + 1</li>
<li>5 + 2</li>
<li>6 + 3</li>
<li>7 + 1</li>
<li>8 + 2</li>
<li>9 + 3</li>
<li>10 + 1 - error because <code>1:3</code> has not been fully cycled through</li>
</ul>
<p>So the following will not return an error:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="dv">1</span><span class="op">:</span><span class="dv">3</span> <span class="op">+</span><span class="st"> </span><span class="dv">1</span><span class="op">:</span><span class="dv">12</span></code></pre></div>
<pre><code>##  [1]  2  4  6  5  7  9  8 10 12 11 13 15</code></pre>
</div>
<div id="problem-6-3" class="section level3 unnumbered">
<h3>Problem 6</h3>
<p>What trigonometric functions does R provide?</p>
<p><code>R</code> has the following trig functions within <code>base</code>:</p>
<ul>
<li>cos(x)</li>
<li>sin(x)</li>
<li><p>tan(x)</p></li>
<li>acos(x)</li>
<li>asin(x)</li>
<li>atan(x)</li>
<li><p>atan2(y, x)</p></li>
<li>cospi(x)</li>
<li>sinpi(x)</li>
<li><p>tanpi(x)</p></li>
</ul>
<p>Note that angles are given in radians:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">cos</span>(pi <span class="op">*</span><span class="st"> </span><span class="fl">0.25</span>)</code></pre></div>
<pre><code>## [1] 0.7071068</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># cospi(x) is equivalent to cos(pi * x)</span>

<span class="kw">cospi</span>(<span class="fl">0.25</span>)</code></pre></div>
<pre><code>## [1] 0.7071068</code></pre>
</div>
</div>
<div id="grouped-summaries-with-summarise" class="section level2 unnumbered">
<h2>5.6 - Grouped summaries with summarise()</h2>
<div id="problem-1-11" class="section level3 unnumbered">
<h3>Problem 1</h3>
<p>Brainstorm at least 5 different ways to assess the typical delay characteristics of a group of flights. Consider the following scenarios:</p>
<ul>
<li>A flight is 15 minutes early 50% of the time, and 15 minutes late 50% of the time.</li>
</ul>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">flights <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">group_by</span>(flight) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">summarise</span>(<span class="dt">fifteen_early =</span> <span class="kw">mean</span>(arr_delay <span class="op">&lt;=</span><span class="st"> </span><span class="op">-</span><span class="dv">15</span>, <span class="dt">na.rm =</span> <span class="ot">TRUE</span>),
            <span class="dt">fifteen_late =</span> <span class="kw">mean</span>(arr_delay <span class="op">&gt;=</span><span class="st"> </span><span class="dv">15</span>, <span class="dt">na.rm =</span> <span class="ot">TRUE</span>)) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">filter</span>(fifteen_early <span class="op">==</span><span class="st"> </span><span class="fl">0.50</span>,
         fifteen_late <span class="op">==</span><span class="st"> </span><span class="fl">0.50</span>)</code></pre></div>
<pre><code>## # A tibble: 21 x 3
##    flight fifteen_early fifteen_late
##     &lt;int&gt;         &lt;dbl&gt;        &lt;dbl&gt;
##  1    107         0.500        0.500
##  2   2072         0.500        0.500
##  3   2366         0.500        0.500
##  4   2500         0.500        0.500
##  5   2552         0.500        0.500
##  6   3495         0.500        0.500
##  7   3505         0.500        0.500
##  8   3518         0.500        0.500
##  9   3544         0.500        0.500
## 10   3651         0.500        0.500
## # ... with 11 more rows</code></pre>
<ul>
<li>A flight is always 10 minutes late.</li>
</ul>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">flights <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">group_by</span>(flight) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">summarise</span>(<span class="dt">ten_late =</span> <span class="kw">mean</span>(arr_delay <span class="op">==</span><span class="st"> </span><span class="dv">10</span>, <span class="dt">na.rm =</span> <span class="ot">TRUE</span>)) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">filter</span>(ten_late <span class="op">==</span><span class="st"> </span><span class="fl">1.00</span>)</code></pre></div>
<pre><code>## # A tibble: 5 x 2
##   flight ten_late
##    &lt;int&gt;    &lt;dbl&gt;
## 1   2254       1.
## 2   3656       1.
## 3   3785       1.
## 4   3880       1.
## 5   5854       1.</code></pre>
<ul>
<li>A flight is 30 minutes early 50% of the time, and 30 minutes late 50% of the time.</li>
</ul>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">flights <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">group_by</span>(flight) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">summarise</span>(<span class="dt">thirty_early =</span> <span class="kw">mean</span>(arr_delay <span class="op">&lt;=</span><span class="st"> </span><span class="op">-</span><span class="dv">30</span>, <span class="dt">na.rm =</span> <span class="ot">TRUE</span>),
            <span class="dt">thirty_late =</span> <span class="kw">mean</span>(arr_delay <span class="op">&gt;=</span><span class="st"> </span><span class="dv">30</span>, <span class="dt">na.rm =</span> <span class="ot">TRUE</span>)) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">filter</span>(thirty_early <span class="op">==</span><span class="st"> </span><span class="fl">0.50</span>,
         thirty_late <span class="op">==</span><span class="st"> </span><span class="fl">0.50</span>)</code></pre></div>
<pre><code>## # A tibble: 3 x 3
##   flight thirty_early thirty_late
##    &lt;int&gt;        &lt;dbl&gt;       &lt;dbl&gt;
## 1   3651        0.500       0.500
## 2   3916        0.500       0.500
## 3   3951        0.500       0.500</code></pre>
<ul>
<li>99% of the time a flight is on time. 1% of the time it’s 2 hours late.</li>
</ul>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">flights <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">group_by</span>(flight) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">summarise</span>(<span class="dt">on_time =</span> <span class="kw">mean</span>(arr_delay <span class="op">&lt;=</span><span class="st"> </span><span class="dv">0</span>, <span class="dt">na.rm =</span> <span class="ot">TRUE</span>),
            <span class="dt">late =</span> <span class="kw">mean</span>(arr_delay <span class="op">&gt;=</span><span class="st"> </span><span class="dv">120</span>, <span class="dt">na.rm =</span> <span class="ot">TRUE</span>)) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">filter</span>(on_time <span class="op">==</span><span class="st"> </span><span class="fl">0.99</span>,
         late <span class="op">==</span><span class="st"> </span><span class="fl">0.01</span>)</code></pre></div>
<pre><code>## # A tibble: 0 x 3
## # ... with 3 variables: flight &lt;int&gt;, on_time &lt;dbl&gt;, late &lt;dbl&gt;</code></pre>
</div>
<div id="problem-2-11" class="section level3 unnumbered">
<h3>Problem 2</h3>
<p>Come up with another approach that will give you the same output as <code>not_cancelled %&gt;% count(dest)</code> and <code>not_cancelled %&gt;% count(tailnum, wt = distance)</code> (without using count()).</p>
<p>First setup the <code>not_cancelled</code> data set.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">not_cancelled &lt;-<span class="st"> </span>flights <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">filter</span>(<span class="op">!</span><span class="kw">is.na</span>(dep_delay), <span class="op">!</span><span class="kw">is.na</span>(arr_delay))</code></pre></div>
<p>The first chunk of code gives us the following output:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">not_cancelled <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">count</span>(dest)</code></pre></div>
<pre><code>## # A tibble: 104 x 2
##    dest      n
##    &lt;chr&gt; &lt;int&gt;
##  1 ABQ     254
##  2 ACK     264
##  3 ALB     418
##  4 ANC       8
##  5 ATL   16837
##  6 AUS    2411
##  7 AVL     261
##  8 BDL     412
##  9 BGR     358
## 10 BHM     269
## # ... with 94 more rows</code></pre>
<p>We can replicate this without using <code>count()</code> by doing a <code>group_by()</code> on <code>dest</code>:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">not_cancelled <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">group_by</span>(dest) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">summarise</span>(<span class="dt">n =</span> <span class="kw">n</span>())</code></pre></div>
<pre><code>## # A tibble: 104 x 2
##    dest      n
##    &lt;chr&gt; &lt;int&gt;
##  1 ABQ     254
##  2 ACK     264
##  3 ALB     418
##  4 ANC       8
##  5 ATL   16837
##  6 AUS    2411
##  7 AVL     261
##  8 BDL     412
##  9 BGR     358
## 10 BHM     269
## # ... with 94 more rows</code></pre>
<p>The second chunk of code gives us:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">not_cancelled <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">count</span>(tailnum, <span class="dt">wt =</span> distance)</code></pre></div>
<pre><code>## # A tibble: 4,037 x 2
##    tailnum       n
##    &lt;chr&gt;     &lt;dbl&gt;
##  1 D942DN    3418.
##  2 N0EGMQ  239143.
##  3 N10156  109664.
##  4 N102UW   25722.
##  5 N103US   24619.
##  6 N104UW   24616.
##  7 N10575  139903.
##  8 N105UW   23618.
##  9 N107US   21677.
## 10 N108UW   32070.
## # ... with 4,027 more rows</code></pre>
<p>Again we can avoid using <code>count</code> by doing a <code>group_by()</code> on <code>tailnum</code>. Since <code>wt = distance</code> gives the total number of miles flown, we use <code>sum()</code> instead:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">not_cancelled <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">group_by</span>(tailnum) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">summarise</span>(<span class="dt">n =</span> <span class="kw">sum</span>(distance))</code></pre></div>
<pre><code>## # A tibble: 4,037 x 2
##    tailnum       n
##    &lt;chr&gt;     &lt;dbl&gt;
##  1 D942DN    3418.
##  2 N0EGMQ  239143.
##  3 N10156  109664.
##  4 N102UW   25722.
##  5 N103US   24619.
##  6 N104UW   24616.
##  7 N10575  139903.
##  8 N105UW   23618.
##  9 N107US   21677.
## 10 N108UW   32070.
## # ... with 4,027 more rows</code></pre>
</div>
<div id="problem-3-11" class="section level3 unnumbered">
<h3>Problem 3</h3>
<p>Our definition of cancelled flights <code>(is.na(dep_delay) | is.na(arr_delay) )</code> is slightly suboptimal. Why? Which is the most important column?</p>
<p><code>arr_delay</code> is the more important of the two columns - filtering on <code>arr_delay</code> alone will give the same subset:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">flights <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">summarise</span>(<span class="dt">suboptimal =</span> <span class="kw">sum</span>(<span class="kw">is.na</span>(dep_delay) <span class="op">|</span><span class="st"> </span><span class="kw">is.na</span>(arr_delay)),
            <span class="dt">optimal =</span> <span class="kw">sum</span>(<span class="kw">is.na</span>(arr_delay)))</code></pre></div>
<pre><code>## # A tibble: 1 x 2
##   suboptimal optimal
##        &lt;int&gt;   &lt;int&gt;
## 1       9430    9430</code></pre>
</div>
<div id="problem-4-11" class="section level3 unnumbered">
<h3>Problem 4</h3>
<p>Look at the number of cancelled flights per day. Is there a pattern? Is the proportion of cancelled flights related to the average delay?</p>
<p>There is a generally positive trend between average delay and the proportion of cancelled flights, with a couple of outliers.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">flights <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">mutate</span>(<span class="dt">date =</span> lubridate<span class="op">::</span><span class="kw">make_date</span>(year, month, day)) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">group_by</span>(date) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">summarise</span>(<span class="dt">cancelled =</span> <span class="kw">mean</span>(<span class="kw">is.na</span>(arr_delay)),
            <span class="dt">avg_delay =</span> <span class="kw">mean</span>(arr_delay, <span class="dt">na.rm =</span> <span class="ot">TRUE</span>)) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">ggplot</span>(<span class="kw">aes</span>(avg_delay, cancelled)) <span class="op">+</span>
<span class="st">  </span><span class="kw">geom_point</span>()</code></pre></div>
<p><img src="05-data-transformation_files/figure-html/5-6-4a-1.png" width="672" /></p>
<p>A lot of flights were cancelled on February 8th and 9th, although the average delays those days were not that large - a snowstorm hit the region that weekend, with a lot of flights preemptively cancelled.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">flights <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">mutate</span>(<span class="dt">date =</span> lubridate<span class="op">::</span><span class="kw">make_date</span>(year, month, day)) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">group_by</span>(date) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">summarise</span>(<span class="dt">cancelled =</span> <span class="kw">mean</span>(<span class="kw">is.na</span>(arr_delay)),
            <span class="dt">avg_delay =</span> <span class="kw">mean</span>(arr_delay, <span class="dt">na.rm =</span> <span class="ot">TRUE</span>)) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">arrange</span>(<span class="kw">desc</span>(cancelled)) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">head</span>()</code></pre></div>
<pre><code>## # A tibble: 6 x 3
##   date       cancelled avg_delay
##   &lt;date&gt;         &lt;dbl&gt;     &lt;dbl&gt;
## 1 2013-02-09     0.575      6.64
## 2 2013-02-08     0.511     24.2 
## 3 2013-05-23     0.235     62.0 
## 4 2013-09-12     0.229     58.9 
## 5 2013-12-10     0.216     44.5 
## 6 2013-12-14     0.189     46.4</code></pre>
</div>
<div id="problem-5-6" class="section level3 unnumbered">
<h3>Problem 5</h3>
<p>Which carrier has the worst delays? Challenge: can you disentangle the effects of bad airports vs. bad carriers? Why/why not? (Hint: think about <code>flights %&gt;% group_by(carrier, dest) %&gt;% summarise(n()</code>)</p>
<p>At first glance, Frontier and AirTran seem to have the worst delays.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">flights <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">group_by</span>(carrier) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">summarise</span>(<span class="dt">median_delay =</span> <span class="kw">median</span>(arr_delay, <span class="dt">na.rm =</span> <span class="ot">TRUE</span>)) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">arrange</span>(<span class="kw">desc</span>(median_delay))</code></pre></div>
<pre><code>## # A tibble: 16 x 2
##    carrier median_delay
##    &lt;chr&gt;          &lt;dbl&gt;
##  1 F9                6.
##  2 FL                5.
##  3 EV               -1.
##  4 MQ               -1.
##  5 YV               -2.
##  6 B6               -3.
##  7 WN               -3.
##  8 UA               -6.
##  9 US               -6.
## 10 9E               -7.
## 11 OO               -7.
## 12 DL               -8.
## 13 AA               -9.
## 14 VX               -9.
## 15 HA              -13.
## 16 AS              -17.</code></pre>
<p>We can try to get a better sense of bad airlines vs bad airports by grouping by both, but this will be thrown off by <code>carrier</code>-<code>dest</code> combinations that occur infrequently.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">flights <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">group_by</span>(carrier, dest) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">summarise</span>(<span class="dt">median_delay =</span> <span class="kw">median</span>(arr_delay, <span class="dt">na.rm =</span> <span class="ot">TRUE</span>)) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">ggplot</span>(<span class="kw">aes</span>(carrier, median_delay)) <span class="op">+</span>
<span class="st">  </span><span class="kw">geom_boxplot</span>()</code></pre></div>
<pre><code>## Warning: Removed 2 rows containing non-finite values (stat_boxplot).</code></pre>
<p><img src="05-data-transformation_files/figure-html/5-6-5b-1.png" width="672" /></p>
</div>
<div id="problem-6-4" class="section level3 unnumbered">
<h3>Problem 6</h3>
<p>What does the <code>sort</code> argument to <code>count()</code> do. When might you use it?</p>
<p>The <code>sort</code> argument will arrange <code>count()</code> in descending order. If we quickly wanted to find the most popular destinations, we could do:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">flights <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">group_by</span>(dest) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">count</span>(<span class="dt">sort =</span> <span class="ot">TRUE</span>) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">head</span>()</code></pre></div>
<pre><code>## # A tibble: 6 x 2
## # Groups:   dest [6]
##   dest      n
##   &lt;chr&gt; &lt;int&gt;
## 1 ORD   17283
## 2 ATL   17215
## 3 LAX   16174
## 4 BOS   15508
## 5 MCO   14082
## 6 CLT   14064</code></pre>
</div>
</div>
<div id="grouped-mutates-and-filters" class="section level2 unnumbered">
<h2>5.7 - Grouped Mutates (and Filters)</h2>
<div id="problem-1-12" class="section level3 unnumbered">
<h3>Problem 1</h3>
<p>Refer back to the lists of useful mutate and filtering functions. Describe how each operation changes when you combine it with grouping.</p>
</div>
<div id="problem-2-12" class="section level3 unnumbered">
<h3>Problem 2</h3>
<p>Which plane <code>(tailnum)</code> has the worst on-time record?</p>
<p>We do a familiar <code>group_by()</code>-<code>summarise()</code> to calculate the proportion of flights with an <code>arr_delay</code> less than or equal to 0, and then apply a <code>filter</code> to see the on-time performance of planes with more than twenty flights.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">flights <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">group_by</span>(tailnum) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">summarise</span>(<span class="dt">flights =</span> <span class="kw">n</span>(),
            <span class="dt">on_time =</span> <span class="kw">mean</span>(arr_delay <span class="op">&lt;=</span><span class="st"> </span><span class="dv">0</span>, <span class="dt">na.rm =</span> <span class="ot">TRUE</span>)) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">select</span>(tailnum, flights, on_time) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">filter</span>(flights <span class="op">&gt;</span><span class="st"> </span><span class="dv">20</span>) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">arrange</span>(on_time) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">head</span>()</code></pre></div>
<pre><code>## # A tibble: 6 x 3
##   tailnum flights on_time
##   &lt;chr&gt;     &lt;int&gt;   &lt;dbl&gt;
## 1 N988AT       37   0.200
## 2 N983AT       32   0.250
## 3 N980AT       47   0.255
## 4 N969AT       34   0.265
## 5 N932AT       30   0.267
## 6 N149AT       22   0.273</code></pre>
</div>
<div id="problem-3-12" class="section level3 unnumbered">
<h3>Problem 3</h3>
<p>What time of day should you fly if you want to avoid delays as much as possible?</p>
<p>It appears that flights later in day have a greater chance of being delayed than those early in the morning.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">flights <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">group_by</span>(hour) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">filter</span>(<span class="op">!</span><span class="kw">is.na</span>(dep_delay)) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">summarise</span>(<span class="dt">delayed =</span> <span class="kw">mean</span>(dep_delay <span class="op">&gt;</span><span class="st"> </span><span class="dv">0</span>, <span class="dt">na.rm =</span> <span class="ot">TRUE</span>)) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">ggplot</span>(<span class="kw">aes</span>(<span class="dt">x =</span> hour, <span class="dt">y =</span> delayed)) <span class="op">+</span>
<span class="st">  </span><span class="kw">geom_col</span>()</code></pre></div>
<p><img src="05-data-transformation_files/figure-html/5-7-3-1.png" width="672" /></p>
</div>
<div id="problem-4-12" class="section level3 unnumbered">
<h3>Problem 4</h3>
<p>For each destination, compute the total minutes of delay. For each flight, compute the proportion of the total delay for its destination.</p>
<p>A grouped mutate comes in handy here, as we can first calculate the total minutes of delay for each destination and then use that value to compute the proportion of the total delay attributable to each flight.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">flights <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">group_by</span>(dest) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">filter</span>(arr_delay <span class="op">&gt;</span><span class="st"> </span><span class="dv">0</span>) <span class="op">%&gt;%</span><span class="st">  </span>
<span class="st">  </span><span class="kw">mutate</span>(<span class="dt">total_delay =</span> <span class="kw">sum</span>(arr_delay),
         <span class="dt">prop_delay =</span> arr_delay <span class="op">/</span><span class="st"> </span><span class="kw">sum</span>(arr_delay)) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">select</span>(dest, flight, total_delay, prop_delay) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">arrange</span>(<span class="kw">desc</span>(total_delay)) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">head</span>()</code></pre></div>
<pre><code>## # A tibble: 6 x 4
## # Groups:   dest [1]
##   dest  flight total_delay prop_delay
##   &lt;chr&gt;  &lt;int&gt;       &lt;dbl&gt;      &lt;dbl&gt;
## 1 ATL     4650     300299. 0.0000400 
## 2 ATL     1547     300299. 0.0000167 
## 3 ATL      346     300299. 0.0000566 
## 4 ATL     4654     300299. 0.0000200 
## 5 ATL      347     300299. 0.00000666
## 6 ATL     4876     300299. 0.0000366</code></pre>
</div>
<div id="problem-5-7" class="section level3 unnumbered">
<h3>Problem 5</h3>
<p>Delays are typically temporally correlated: even once the problem that caused the initial delay has been resolved, later flights are delayed to allow earlier flights to leave. Using lag() explore how the delay of a flight is related to the delay of the immediately preceding flight.</p>
<p>First group by <code>origin</code> and the perform a <code>mutate()</code> with <code>lag()</code> to get the delay of the immediately preceding flight. We then use <code>summarise</code> to get the correlation between the delay and lagged delay for each airport.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">flights <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">group_by</span>(origin) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">filter</span>(<span class="op">!</span><span class="kw">is.na</span>(dep_delay)) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">arrange</span>(year, month, day, hour, minute) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">mutate</span>(<span class="dt">lag_delay =</span> <span class="kw">lag</span>(dep_delay)) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">summarise</span>(<span class="dt">delay_correlation =</span> <span class="kw">cor</span>(dep_delay, lag_delay, <span class="dt">use =</span> <span class="st">&#39;complete.obs&#39;</span>))</code></pre></div>
<pre><code>## # A tibble: 3 x 2
##   origin delay_correlation
##   &lt;chr&gt;              &lt;dbl&gt;
## 1 EWR                0.265
## 2 JFK                0.242
## 3 LGA                0.302</code></pre>
</div>
<div id="problem-6-5" class="section level3 unnumbered">
<h3>Problem 6</h3>
<p>Look at each destination. Can you find flights that are suspiciously fast? (i.e. flights that represent a potential data entry error). Compute the air time a flight relative to the shortest flight to that destination. Which flights were most delayed in the air?</p>
<p>A grouped <code>mutate</code> is helpful here, as we can calculate the mean air time by destination and then immediately use that value to calculate a flight’s deviation from it. Note that we filtered out flights less than an hour long.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">deviation &lt;-<span class="st"> </span>flights <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">group_by</span>(dest) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">filter</span>(<span class="op">!</span><span class="kw">is.na</span>(air_time)) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">mutate</span>(<span class="dt">mean_air_time =</span> <span class="kw">mean</span>(air_time),
         <span class="dt">deviation =</span> (air_time <span class="op">-</span><span class="st"> </span>mean_air_time) <span class="op">/</span><span class="st"> </span>mean_air_time) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">filter</span>(mean_air_time <span class="op">&gt;</span><span class="st"> </span><span class="dv">60</span>) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">arrange</span>(deviation) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">select</span>(air_time, mean_air_time, deviation, origin, dest)

deviation <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">head</span>()</code></pre></div>
<pre><code>## # A tibble: 6 x 5
## # Groups:   dest [6]
##   air_time mean_air_time deviation origin dest 
##      &lt;dbl&gt;         &lt;dbl&gt;     &lt;dbl&gt; &lt;chr&gt;  &lt;chr&gt;
## 1      65.         113.     -0.424 LGA    ATL  
## 2      55.          93.4    -0.411 EWR    GSP  
## 3      70.         114.     -0.388 EWR    BNA  
## 4      93.         151.     -0.382 EWR    MSP  
## 5      62.          96.0    -0.354 EWR    CVG  
## 6      40.          61.5    -0.349 LGA    PIT</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">deviation <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">tail</span>()</code></pre></div>
<pre><code>## # A tibble: 6 x 5
## # Groups:   dest [5]
##   air_time mean_air_time deviation origin dest 
##      &lt;dbl&gt;         &lt;dbl&gt;     &lt;dbl&gt; &lt;chr&gt;  &lt;chr&gt;
## 1     147.          86.2     0.706 EWR    CLT  
## 2     198.         116.      0.713 EWR    ORD  
## 3     185.         106.      0.741 EWR    SDF  
## 4     138.          70.9     0.947 JFK    RDU  
## 5     170.          84.8     1.00  LGA    DTW  
## 6     170.          84.8     1.00  JFK    DTW</code></pre>
</div>
<div id="problem-7" class="section level3 unnumbered">
<h3>Problem 7</h3>
<p>Find all destinations that are flown by at least two carriers. Use that information to rank the carriers.</p>
<p>We first use a <code>group_by</code> with <code>mutate()</code> and <code>filter()</code> to subset the destinations serviced by at least 2 carriers, followed by a second <code>group_by</code> to rank the carriers by total destinations served. We also merge data from the <code>airlines</code> data set to get the full carrier names.</p>
<p>ExpressJet and Endeavor Air are regional airlines which operate as American Eagle, United Express, and Delta Connection.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">flights <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">group_by</span>(dest) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">mutate</span>(<span class="dt">carriers =</span> <span class="kw">n_distinct</span>(carrier)) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">filter</span>(carriers <span class="op">&gt;=</span><span class="st"> </span><span class="dv">2</span>) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">group_by</span>(carrier) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">summarise</span>(<span class="dt">destinations =</span> <span class="kw">n_distinct</span>(dest)) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">arrange</span>(<span class="kw">desc</span>(destinations)) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">left_join</span>(airlines) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">select</span>(carrier, name, destinations) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">head</span>()</code></pre></div>
<pre><code>## Joining, by = &quot;carrier&quot;</code></pre>
<pre><code>## # A tibble: 6 x 3
##   carrier name                     destinations
##   &lt;chr&gt;   &lt;chr&gt;                           &lt;int&gt;
## 1 EV      ExpressJet Airlines Inc.           51
## 2 9E      Endeavor Air Inc.                  48
## 3 UA      United Air Lines Inc.              42
## 4 DL      Delta Air Lines Inc.               39
## 5 B6      JetBlue Airways                    35
## 6 AA      American Airlines Inc.             19</code></pre>
</div>
<div id="problem-8" class="section level3 unnumbered">
<h3>Problem 8</h3>
<p>For each plane, count the number of flights before the first delay of greater than 1 hour.</p>
<p>First <code>group_by()</code> <code>tailnum</code> and then apply a <code>filter()</code> using the <code>cumall</code> window function to subset everything before the first delay of more than 1 hour.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">flights <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">arrange</span>(year, month, day, hour, minute) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">group_by</span>(tailnum) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">filter</span>(<span class="kw">cumall</span>(dep_delay <span class="op">&lt;=</span><span class="st"> </span><span class="dv">60</span>)) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">count</span>() <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">arrange</span>(<span class="kw">desc</span>(n)) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">head</span>()</code></pre></div>
<pre><code>## # A tibble: 6 x 2
## # Groups:   tailnum [6]
##   tailnum     n
##   &lt;chr&gt;   &lt;int&gt;
## 1 N954UW    206
## 2 N952UW    163
## 3 N957UW    142
## 4 N5FAAA    117
## 5 N38727     99
## 6 N3742C     98</code></pre>

</div>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="chapter-3-data-visualisation.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="chapter-7-exploratory-data-analysis.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"google": false,
"linkedin": false,
"weibo": false,
"instapper": false,
"vk": false,
"all": ["facebook", "google", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"download": null,
"toc": {
"collapse": "subsection"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "";
    if (src === "" || src === "true") src = "https://cdn.bootcss.com/mathjax/2.7.1/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:" && /^https?:/.test(src))
      src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
